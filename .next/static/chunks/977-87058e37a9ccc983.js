"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[977],{2358:(e,t,r)=>{r.d(t,{NavigationLayout:()=>i});var a=r(5155),s=r(2115),n=r(5695),l=r(5269),o=r(7274);let i=e=>{let{children:t,className:r=""}=e,[i,d]=(0,s.useState)(!1),[c,u]=(0,s.useState)(!1),h=(0,n.usePathname)();return(0,s.useEffect)(()=>{let e=()=>{u(window.innerWidth<1024)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,s.useEffect)(()=>{c&&d(!1)},[h,c]),(0,s.useEffect)(()=>{let e=e=>{(e.metaKey||e.ctrlKey)&&"b"===e.key&&(e.preventDefault(),d(!i))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[i]),(0,a.jsxs)("div",{className:"flex min-h-screen bg-gray-50 dark:bg-gray-900 ".concat(r),children:[(0,a.jsx)(o.Sidebar,{isOpen:i||!c,onClose:()=>d(!1)}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col min-w-0",children:[c&&(0,a.jsx)("header",{className:"lg:hidden bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 px-4 py-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(l.$n,{variant:"ghost",size:"sm",onClick:()=>d(!0),"aria-label":"Open sidebar",className:"p-2",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,a.jsx)("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"MCP Chat UI"}),(0,a.jsx)("div",{className:"w-10"})," "]})}),(0,a.jsx)("main",{className:"flex-1 flex flex-col overflow-hidden",children:t})]})]})}},4649:(e,t,r)=>{r.d(t,{ChatSessionItem:()=>o});var a=r(5155),s=r(2115),n=r(5269),l=r(7832);let o=e=>{var t;let{session:r,isActive:o,onClick:i,onRename:d,onDelete:c,onArchive:u}=e,[h,m]=(0,s.useState)(!1),x=(0,s.useRef)(null);(0,l.L)(x,()=>m(!1),h);let g=e=>{e(),m(!1)};return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:i,className:"\n          w-full text-left p-3 rounded-lg transition-colors duration-200\n          hover:bg-gray-100 dark:hover:bg-gray-800\n          focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\n          ".concat(o?"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800":"border border-transparent","\n        "),role:"button",tabIndex:0,children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(e=>{switch(e){case"openai":return(0,a.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full flex-shrink-0",title:"OpenAI"});case"deepseek":return(0,a.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full flex-shrink-0",title:"DeepSeek"});case"openrouter":return(0,a.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full flex-shrink-0",title:"OpenRouter"});default:return(0,a.jsx)("div",{className:"w-3 h-3 bg-gray-500 rounded-full flex-shrink-0",title:e})}})(r.provider),(0,a.jsx)("h3",{className:"\n                text-sm font-medium truncate\n                ".concat(o?"text-blue-900 dark:text-blue-100":"text-gray-900 dark:text-white","\n              "),children:r.title})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[(0,a.jsxs)("span",{children:[(null==(t=r.messages)?void 0:t.length)||0," messages"]}),(0,a.jsx)("span",{children:(e=>{let t=(new Date().getTime()-e.getTime())/36e5;return t<1?"Just now":t<24?"".concat(Math.floor(t),"h ago"):t<168?"".concat(Math.floor(t/24),"d ago"):e.toLocaleDateString()})(r.updatedAt)})]}),(0,a.jsx)("div",{className:"mt-1 text-xs text-gray-400 dark:text-gray-500",children:r.model})]}),(0,a.jsx)("div",{className:"ml-2 flex-shrink-0",children:(0,a.jsx)(n.$n,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),m(!h)},className:"opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 p-1","aria-label":"Session options",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})})})]})}),h&&(0,a.jsx)("div",{ref:x,className:"absolute right-0 top-0 mt-1 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg border border-gray-200 dark:border-gray-700 z-10",role:"menu",children:(0,a.jsxs)("div",{className:"py-1",children:[(0,a.jsxs)("button",{onClick:()=>g(d),className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center",role:"menuitem",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Rename"]}),(0,a.jsxs)("button",{onClick:()=>g(u),className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center",role:"menuitem",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8l4 4 4-4m6 5l-3-3m0 0l-3 3m3-3v12"})}),"Archive"]}),(0,a.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-600 my-1"}),(0,a.jsxs)("button",{onClick:()=>g(c),className:"w-full text-left px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center",role:"menuitem",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})})]})}},5269:(e,t,r)=>{r.d(t,{$n:()=>l,pd:()=>i,aF:()=>h,l6:()=>c});var a=r(5155),s=r(2115);let n=(0,s.forwardRef)((e,t)=>{let{children:r,variant:s="primary",size:n="md",loading:l=!1,leftIcon:o,rightIcon:i,fullWidth:d=!1,disabled:c,className:u="",tooltip:h,shortcut:m,...x}=e,g=["inline-flex items-center justify-center font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed relative",d?"w-full":""].join(" ");return(0,a.jsx)("button",{ref:t,className:"".concat(g," ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-gray-500 dark:text-gray-300 dark:hover:bg-gray-800",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"}[s]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[n]," ").concat(u),disabled:c||l,"aria-disabled":c||l,"aria-busy":l,title:h,...x,children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(()=>(0,a.jsxs)("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),{}),(0,a.jsx)("span",{className:"ml-2","aria-live":"polite",children:r})]}):(0,a.jsxs)(a.Fragment,{children:[o&&(0,a.jsx)("span",{className:"mr-2","aria-hidden":"true",children:o}),(0,a.jsx)("span",{children:r}),m&&(0,a.jsx)("span",{className:"ml-2 text-xs opacity-70","aria-label":"Keyboard shortcut: ".concat(m),children:(0,a.jsx)("kbd",{className:"px-1 py-0.5 bg-black/10 dark:bg-white/10 rounded text-xs",children:m})}),i&&(0,a.jsx)("span",{className:"ml-2","aria-hidden":"true",children:i})]})})});n.displayName="Button";let l=n,o=(0,s.forwardRef)((e,t)=>{let{label:r,error:n,helperText:l,leftIcon:o,rightIcon:i,loading:d=!1,fullWidth:c=!1,variant:u="default",className:h="",id:m,type:x="text",disabled:g,...p}=e,[,f]=(0,s.useState)(!1),b=m||"input-".concat(Math.random().toString(36).substring(2,11)),y=["block px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",c?"w-full":""].join(" "),v=(0,a.jsxs)("div",{className:"relative",children:[o&&(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)("span",{className:"text-gray-400","aria-hidden":"true",children:o})}),(0,a.jsx)("input",{ref:t,id:b,type:x,className:"".concat(y," ").concat({default:n?"border-red-300 text-red-900 placeholder-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 text-gray-900 placeholder-gray-400 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400",filled:n?"border-red-300 bg-red-50 text-red-900 placeholder-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 bg-gray-50 text-gray-900 placeholder-gray-400 dark:border-gray-600 dark:bg-gray-800 dark:text-white dark:placeholder-gray-400"}[u]," ").concat(o?"pl-10":""," ").concat(i||d?"pr-10":""," ").concat(h),disabled:g||d,"aria-invalid":n?"true":"false","aria-busy":d,"aria-required":p.required,"aria-describedby":n?"".concat(b,"-error"):l?"".concat(b,"-helper"):void 0,onFocus:e=>{var t;f(!0),null==(t=p.onFocus)||t.call(p,e)},onBlur:e=>{var t;f(!1),null==(t=p.onBlur)||t.call(p,e)},...p}),(i||d)&&(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:d?(0,a.jsx)(()=>(0,a.jsxs)("svg",{className:"animate-spin h-4 w-4 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),{}):(0,a.jsx)("span",{className:"text-gray-400","aria-hidden":"true",children:i})})]});return r||n||l?(0,a.jsxs)("div",{className:c?"w-full":"",children:[r&&(0,a.jsx)("label",{htmlFor:b,className:"block text-sm font-medium mb-1 ".concat(n?"text-red-700 dark:text-red-400":"text-gray-700 dark:text-gray-300"),children:r}),v,n&&(0,a.jsx)("p",{id:"".concat(b,"-error"),className:"mt-1 text-sm text-red-600 dark:text-red-400",role:"alert",children:n}),l&&!n&&(0,a.jsx)("p",{id:"".concat(b,"-helper"),className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:l})]}):v});o.displayName="Input";let i=o;(0,s.forwardRef)((e,t)=>{let{label:r,error:n,helperText:l,loading:o=!1,fullWidth:i=!1,variant:d="default",autoResize:c=!1,maxRows:u,minRows:h=3,className:m="",id:x,disabled:g,onChange:p,...f}=e,b=(0,s.useRef)(null),y=x||"textarea-".concat(Math.random().toString(36).substr(2,9)),v=()=>{let e=b.current;if(!e||!c)return;e.style.height="auto";let t=e.scrollHeight,r=parseInt(getComputedStyle(e).lineHeight),a=parseInt(getComputedStyle(e).paddingTop),s=parseInt(getComputedStyle(e).paddingBottom),n=t;u&&(n=Math.min(n,r*u+a+s)),n=Math.max(n,r*h+a+s),e.style.height="".concat(n,"px")};(0,s.useEffect)(()=>{v()},[f.value,c,u,h]);let k=["block px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed resize-none",i?"w-full":""].join(" "),j=(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("textarea",{ref:e=>{b.current=e,"function"==typeof t?t(e):t&&(t.current=e)},id:y,className:"".concat(k," ").concat({default:n?"border-red-300 text-red-900 placeholder-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 text-gray-900 placeholder-gray-400 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400",filled:n?"border-red-300 bg-red-50 text-red-900 placeholder-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 bg-gray-50 text-gray-900 placeholder-gray-400 dark:border-gray-600 dark:bg-gray-800 dark:text-white dark:placeholder-gray-400"}[d]," ").concat(o?"pr-10":""," ").concat(m),disabled:g||o,"aria-invalid":n?"true":"false","aria-describedby":n?"".concat(y,"-error"):l?"".concat(y,"-helper"):void 0,rows:c?h:f.rows||h,onChange:e=>{c&&v(),null==p||p(e)},...f}),o&&(0,a.jsx)("div",{className:"absolute top-3 right-3 pointer-events-none",children:(0,a.jsxs)("svg",{className:"animate-spin h-4 w-4 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})]});return r||n||l?(0,a.jsxs)("div",{className:i?"w-full":"",children:[r&&(0,a.jsx)("label",{htmlFor:y,className:"block text-sm font-medium mb-1 ".concat(n?"text-red-700 dark:text-red-400":"text-gray-700 dark:text-gray-300"),children:r}),j,n&&(0,a.jsx)("p",{id:"".concat(y,"-error"),className:"mt-1 text-sm text-red-600 dark:text-red-400",role:"alert",children:n}),l&&!n&&(0,a.jsx)("p",{id:"".concat(y,"-helper"),className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:l})]}):j}).displayName="Textarea";let d=(0,s.forwardRef)((e,t)=>{let{label:r,error:s,helperText:n,options:l,placeholder:o,loading:i=!1,fullWidth:d=!1,variant:c="default",className:u="",id:h,disabled:m,...x}=e,g=h||"select-".concat(Math.random().toString(36).substr(2,9)),p=["block px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed appearance-none bg-no-repeat bg-right",d?"w-full":""].join(" "),f=(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("select",{ref:t,id:g,className:"".concat(p," ").concat({default:s?"border-red-300 text-red-900 focus:ring-red-500 focus:border-red-500":"border-gray-300 text-gray-900 dark:border-gray-600 dark:bg-gray-700 dark:text-white",filled:s?"border-red-300 bg-red-50 text-red-900 focus:ring-red-500 focus:border-red-500":"border-gray-300 bg-gray-50 text-gray-900 dark:border-gray-600 dark:bg-gray-800 dark:text-white"}[c]," ").concat(i?"pr-10":"pr-8"," ").concat(u),disabled:m||i,"aria-invalid":s?"true":"false","aria-describedby":s?"".concat(g,"-error"):n?"".concat(g,"-helper"):void 0,...x,children:[o&&(0,a.jsx)("option",{value:"",disabled:!0,children:o}),l.map(e=>(0,a.jsx)("option",{value:e.value,disabled:e.disabled,children:e.label},e.value))]}),(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:i?(0,a.jsxs)("svg",{className:"animate-spin h-4 w-4 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,a.jsx)("svg",{className:"h-4 w-4 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]});return r||s||n?(0,a.jsxs)("div",{className:d?"w-full":"",children:[r&&(0,a.jsx)("label",{htmlFor:g,className:"block text-sm font-medium mb-1 ".concat(s?"text-red-700 dark:text-red-400":"text-gray-700 dark:text-gray-300"),children:r}),f,s&&(0,a.jsx)("p",{id:"".concat(g,"-error"),className:"mt-1 text-sm text-red-600 dark:text-red-400",role:"alert",children:s}),n&&!s&&(0,a.jsx)("p",{id:"".concat(g,"-helper"),className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:n})]}):f});d.displayName="Select";let c=d;var u=r(7650);let h=e=>{let{isOpen:t,onClose:r,title:n,children:l,size:o="md",closeOnOverlayClick:i=!0,closeOnEscape:d=!0,showCloseButton:c=!0,className:h=""}=e,m=(0,s.useRef)(null),x=(0,s.useRef)(null);if((0,s.useEffect)(()=>{if(t){var e;x.current=document.activeElement,null==(e=m.current)||e.focus(),document.body.style.overflow="hidden"}else document.body.style.overflow="",x.current&&x.current.focus();return()=>{document.body.style.overflow=""}},[t]),(0,s.useEffect)(()=>{let e=e=>{d&&"Escape"===e.key&&r()};return t&&document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[t,d,r]),!t)return null;let g=(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-2 sm:p-4","aria-labelledby":n?"modal-title":void 0,"aria-modal":"true",role:"dialog",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:e=>{i&&e.target===e.currentTarget&&r()}}),(0,a.jsx)("div",{ref:m,className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl ".concat({sm:"max-w-sm sm:max-w-md",md:"max-w-md sm:max-w-lg",lg:"max-w-lg sm:max-w-2xl",xl:"max-w-2xl sm:max-w-4xl",full:"max-w-full mx-2 sm:mx-4"}[o]," w-full max-h-[95vh] sm:max-h-[90vh] overflow-y-auto ").concat(h),tabIndex:-1,onKeyDown:e=>{if("Tab"===e.key){var t;let r=null==(t=m.current)?void 0:t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(r&&r.length>0){let t=r[0],a=r[r.length-1];e.shiftKey?document.activeElement===t&&(e.preventDefault(),a.focus()):document.activeElement===a&&(e.preventDefault(),t.focus())}}},children:(0,a.jsxs)("div",{className:"p-4 sm:p-6",children:[(n||c)&&(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[n&&(0,a.jsx)("h3",{id:"modal-title",className:"text-lg font-medium text-gray-900 dark:text-white",children:n}),c&&(0,a.jsx)("button",{type:"button",className:"rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:r,"aria-label":"Close modal",children:(0,a.jsx)("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsx)("div",{className:"text-gray-900 dark:text-white",children:l})]})})]});return(0,u.createPortal)(g,document.body)}},5516:(e,t,r)=>{r.d(t,{NewChatModal:()=>m});var a=r(5155),s=r(2115),n=r(5269);class l extends Error{constructor(e,t,r){super(e),this.statusCode=t,this.originalError=r,this.name="ApiClientError"}}class o extends l{constructor(e,t){super(e,void 0,t),this.name="NetworkError"}}class i extends l{constructor(e="Request timeout"){super(e,408),this.name="TimeoutError"}}class d extends l{constructor(e){super(e,400),this.name="ValidationError"}}class c{addRequestInterceptor(e){this.requestInterceptors.push(e)}addResponseInterceptor(e){this.responseInterceptors.push(e)}addErrorInterceptor(e){this.errorInterceptors.push(e)}addLoadingStateListener(e){return this.loadingStateListeners.push(e),()=>{let t=this.loadingStateListeners.indexOf(e);t>-1&&this.loadingStateListeners.splice(t,1)}}setLoadingState(e){this.currentLoadingState={...this.currentLoadingState,...e},this.loadingStateListeners.forEach(e=>e(this.currentLoadingState))}getLoadingState(){return{...this.currentLoadingState}}async sleep(e){return new Promise(t=>setTimeout(t,e))}createAbortController(e){let t=new AbortController;return setTimeout(()=>t.abort(),e),t}async applyRequestInterceptors(e){let t=e;for(let e of this.requestInterceptors)t=await e(t);return t}async applyResponseInterceptors(e){let t=e;for(let e of this.responseInterceptors)t=await e(t);return t}async applyErrorInterceptors(e){let t=e;for(let e of this.errorInterceptors)t=await e(t);return t}async makeRequest(e){let{method:t,url:r,data:a,headers:s={},timeout:n=3e4,retries:c=3,retryDelay:u=1e3,signal:h}=await this.applyRequestInterceptors(e),m=r.startsWith("http")?r:"".concat(this.baseUrl).concat(r);this.setLoadingState({isLoading:!0,operation:"".concat(t," ").concat(r)});let x=null;for(let e=0;e<=c;e++)try{let e=h?void 0:this.createAbortController(n),r=h||(null==e?void 0:e.signal),o={method:t,headers:{"Content-Type":"application/json",...s},signal:r};a&&"GET"!==t&&(o.body=JSON.stringify(a)),console.log("\uD83C\uDF10 Making fetch request to:",m,"with method:",t);let i=await fetch(m,o);console.log("\uD83C\uDF10 Received response:",i.status,i.statusText);let d=await this.applyResponseInterceptors(i);if(!d.ok){let e="HTTP ".concat(d.status,": ").concat(d.statusText),t=null;try{let r=await d.json();(r.error||r.message)&&(e=(t=r).message||t.error||e)}catch(e){}let r=new l(e,d.status);throw await this.applyErrorInterceptors(r)}let c=await d.json();return console.log("\uD83C\uDF10 API Response received:",c),this.setLoadingState({isLoading:!1}),c}catch(t){if((x=t instanceof l?t:t instanceof DOMException&&"AbortError"===t.name?new i("Request timeout"):t instanceof TypeError&&t.message.includes("fetch")?new o("Network error - please check your connection",t):new l(t instanceof Error?t.message:"Unknown error occurred",void 0,t))instanceof d||x instanceof i||x.statusCode&&x.statusCode>=400&&x.statusCode<500)break;e<c&&await this.sleep(u*Math.pow(2,e))}if(this.setLoadingState({isLoading:!1}),x)throw await this.applyErrorInterceptors(x);throw new l("Request failed after all retry attempts")}async get(e,t){return this.makeRequest({method:"GET",url:e,...t})}async post(e,t,r){return this.makeRequest({method:"POST",url:e,data:t,...r})}async put(e,t,r){return this.makeRequest({method:"PUT",url:e,data:t,...r})}async delete(e,t){return this.makeRequest({method:"DELETE",url:e,...t})}async patch(e,t,r){return this.makeRequest({method:"PATCH",url:e,data:t,...r})}constructor(e="/api"){this.baseUrl=e,this.requestInterceptors=[],this.responseInterceptors=[],this.errorInterceptors=[],this.loadingStateListeners=[],this.currentLoadingState={isLoading:!1}}}let u=new c;u.addRequestInterceptor(e=>({...e,headers:{"X-Requested-With":"XMLHttpRequest",...e.headers}})),u.addErrorInterceptor(e=>(console.error("API Error:",{message:e.message,statusCode:e.statusCode,originalError:e.originalError}),e));let h={getSettings:()=>u.get("/settings")},m=e=>{let{isOpen:t,onClose:r,onCreateChat:l}=e,[o,i]=(0,s.useState)(""),[d,c]=(0,s.useState)(""),[u,m]=(0,s.useState)([]),[x,g]=(0,s.useState)(!1),[p,f]=(0,s.useState)(null);(0,s.useEffect)(()=>{t&&b()},[t]);let b=async()=>{g(!0),f(null);try{let e=(await h.getSettings()).llmProviders.filter(e=>e.enabled&&e.apiKey);m(e),0===e.length&&f("No LLM providers are configured. Please configure providers in settings.")}catch(e){console.error("Failed to load providers:",e),f("Failed to load provider configuration. Please try again.")}finally{g(!1)}},y=()=>{i(""),c(""),f(null),r()},v=u.map(e=>({value:e.name,label:w(e.name)})),k=u.find(e=>e.name===o),j=(null==k?void 0:k.models.map(e=>({value:e.id,label:"".concat(e.displayName).concat(e.supportsToolCalling?" (Tool Calling)":"")})))||[];function w(e){switch(e){case"openai":return"OpenAI";case"deepseek":return"DeepSeek";case"openrouter":return"OpenRouter";default:return e.charAt(0).toUpperCase()+e.slice(1)}}let N=null==k?void 0:k.models.find(e=>e.id===d);return(0,a.jsxs)(n.aF,{isOpen:t,onClose:y,title:"Start New Conversation",size:"md",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Select an LLM provider and model to start a new conversation. Only configured providers with valid API keys are shown."}),x?(0,a.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,a.jsx)("span",{className:"ml-3 text-sm text-gray-600 dark:text-gray-400",children:"Loading providers..."})]}):p?(0,a.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md p-4",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-red-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Configuration Error"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-red-700 dark:text-red-300",children:p})]})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.l6,{label:"LLM Provider",options:v,value:o,onChange:e=>{i(e.target.value),c("")},placeholder:"Select a provider",fullWidth:!0}),o&&(0,a.jsx)(n.l6,{label:"Model",options:j,value:d,onChange:e=>c(e.target.value),placeholder:"Select a model",fullWidth:!0}),o&&d&&N&&(0,a.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md p-4",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(e=>{switch(e){case"openai":return(0,a.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"});case"deepseek":return(0,a.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"});case"openrouter":return(0,a.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full"});default:return(0,a.jsx)("div",{className:"w-3 h-3 bg-gray-500 rounded-full"})}})(o),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Selected Configuration"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm text-blue-800 dark:text-blue-200",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Provider:"})," ",w(o)]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Model:"})," ",N.displayName]}),N.maxTokens&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Max Tokens:"})," ",N.maxTokens.toLocaleString()]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"font-medium",children:"Tool Calling:"}),N.supportsToolCalling?(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",children:"✓ Supported"}):(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400",children:"Not supported"})]})]})]})]})})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,a.jsx)(n.$n,{variant:"outline",onClick:y,children:"Cancel"}),(0,a.jsx)(n.$n,{variant:"primary",onClick:()=>{o&&d&&(l(o,d),y())},disabled:!o||!d||x,children:"Create Chat"})]})]})}},5695:(e,t,r)=>{var a=r(8999);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},7274:(e,t,r)=>{r.d(t,{Sidebar:()=>c});var a=r(5155),s=r(2115),n=r(5695),l=r(5269),o=r(7832),i=r(4649),d=r(5516);let c=e=>{let{isOpen:t,onClose:r,className:c=""}=e,u=(0,n.useRouter)(),h=(0,n.usePathname)(),m=(0,s.useRef)(null),[x,g]=(0,s.useState)(""),[p,f]=(0,s.useState)(!1),[b,y]=(0,s.useState)(!1),[v,k]=(0,s.useState)(!1),[j,w]=(0,s.useState)(null),[N,C]=(0,s.useState)(""),{chatSessions:L,createSession:S,updateSession:E,deleteSession:M,searchSessions:R}=(()=>{let[e,t]=(0,s.useState)([{id:"1",title:"Getting started with MCP",messages:[],createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15"),provider:"openai",model:"gpt-4",mcpServers:[]},{id:"2",title:"File processing automation",messages:[],createdAt:new Date("2024-01-14"),updatedAt:new Date("2024-01-14"),provider:"deepseek",model:"deepseek-chat",mcpServers:[]},{id:"3",title:"Data analysis workflow",messages:[],createdAt:new Date("2024-01-13"),updatedAt:new Date("2024-01-13"),provider:"openrouter",model:"anthropic/claude-3-sonnet",mcpServers:[]}]),r=(0,s.useCallback)((e,r)=>{let a={id:Date.now().toString(),title:"New Chat",messages:[],createdAt:new Date,updatedAt:new Date,provider:e,model:r,mcpServers:[]};return t(e=>[a,...e]),a.id},[]),a=(0,s.useCallback)((e,r)=>{t(t=>t.map(t=>t.id===e?{...t,...r,updatedAt:new Date}:t))},[]),n=(0,s.useCallback)(e=>{t(t=>t.filter(t=>t.id!==e))},[]),l=(0,s.useCallback)((e,t)=>{a(e,{title:t})},[a]),o=(0,s.useCallback)(t=>e.find(e=>e.id===t),[e]),i=(0,s.useCallback)(t=>t.trim()?e.filter(e=>e.title.toLowerCase().includes(t.toLowerCase())):e,[e]);return{chatSessions:e,createSession:r,updateSession:a,deleteSession:n,renameSession:l,getSession:o,searchSessions:i}})();(0,o.L)(m,r,t);let I=R(x),z=h.startsWith("/chat/")?h.split("/")[2]:null;(0,s.useEffect)(()=>{let e=e=>{t&&"Escape"===e.key&&r()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t,r]);let A=e=>{w(e),k(!0)};return(0,a.jsxs)(a.Fragment,{children:[t&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:r,"aria-hidden":"true"}),(0,a.jsxs)("aside",{ref:m,className:"\n          fixed lg:static inset-y-0 left-0 z-50 lg:z-auto\n          w-80 bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700\n          transform transition-transform duration-300 ease-in-out lg:transform-none\n          ".concat(t?"translate-x-0":"-translate-x-full lg:translate-x-0","\n          flex flex-col h-full\n          ").concat(c,"\n        "),"aria-label":"Chat navigation",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:[(0,a.jsx)("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"MCP Chat UI"}),(0,a.jsx)(l.$n,{variant:"ghost",size:"sm",className:"lg:hidden",onClick:r,"aria-label":"Close sidebar",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:(0,a.jsx)(l.$n,{variant:"primary",size:"md",fullWidth:!0,onClick:()=>{f(!0)},leftIcon:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),children:"New Chat"})}),(0,a.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:(0,a.jsx)(l.pd,{placeholder:"Search conversations...",value:x,onChange:e=>g(e.target.value),leftIcon:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),fullWidth:!0})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h2",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-3",children:"Recent Conversations"}),0===I.length?(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-8",children:x?"No matching conversations found":"No conversations yet"}):(0,a.jsx)("div",{className:"space-y-1",children:I.map(e=>(0,a.jsx)(i.ChatSessionItem,{session:e,isActive:z===e.id,onClick:()=>{var t;return t=e.id,void(u.push("/chat/".concat(t)),r())},onRename:()=>(e=>{w(e),C(e.title),y(!0)})(e),onDelete:()=>A(e),onArchive:()=>{A(e)}},e.id))})]})}),(0,a.jsxs)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.$n,{variant:"ghost",size:"sm",fullWidth:!0,onClick:()=>u.push("/settings"),leftIcon:(0,a.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),children:"Settings"}),(0,a.jsx)(l.$n,{variant:"ghost",size:"sm",fullWidth:!0,onClick:()=>u.push("/history"),leftIcon:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),children:"History"})]}),(0,a.jsx)("div",{className:"mt-4 text-xs text-gray-500 dark:text-gray-400 text-center",children:"Version 1.0.0"})]})]}),(0,a.jsx)(d.NewChatModal,{isOpen:p,onClose:()=>f(!1),onCreateChat:(e,t)=>{let a=S(e,t);f(!1),u.push("/chat/".concat(a)),r()}}),(0,a.jsx)(l.aF,{isOpen:b,onClose:()=>y(!1),title:"Rename Conversation",size:"md",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(l.pd,{label:"Conversation Title",value:N,onChange:e=>C(e.target.value),placeholder:"Enter new title",fullWidth:!0,autoFocus:!0}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,a.jsx)(l.$n,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),(0,a.jsx)(l.$n,{variant:"primary",onClick:()=>{j&&N.trim()&&(E(j.id,{title:N.trim()}),y(!1),w(null),C(""))},disabled:!N.trim(),children:"Save"})]})]})}),(0,a.jsx)(l.aF,{isOpen:v,onClose:()=>k(!1),title:"Delete Conversation",size:"md",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("p",{className:"text-gray-700 dark:text-gray-300",children:['Are you sure you want to delete "',null==j?void 0:j.title,'"? This action cannot be undone.']}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,a.jsx)(l.$n,{variant:"outline",onClick:()=>k(!1),children:"Cancel"}),(0,a.jsx)(l.$n,{variant:"danger",onClick:()=>{j&&(M(j.id),k(!1),w(null),z===j.id&&u.push("/"))},children:"Delete"})]})]})})]})}},7832:(e,t,r)=>{r.d(t,{L:()=>s});var a=r(2115);let s=function(e,t){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];(0,a.useEffect)(()=>{if(!r)return;let a=r=>{if(e.current&&!e.current.contains(r.target)){let e=r.target;s.some(t=>{try{return e.closest(t)}catch(e){return!1}})||t()}};return document.addEventListener("mousedown",a),document.addEventListener("touchstart",a),()=>{document.removeEventListener("mousedown",a),document.removeEventListener("touchstart",a)}},[e,t,r,s])}}}]);