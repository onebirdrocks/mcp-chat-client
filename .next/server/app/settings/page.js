(()=>{var a={};a.id=662,a.ids=[662],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},906:(a,b,c)=>{"use strict";c.d(b,{default:()=>F});var d=c(60687),e=c(43210);function f({language:a="en"}){let[b,c]=(0,e.useState)([]),[f,g]=(0,e.useState)({}),[h,i]=(0,e.useState)(!0),[j,k]=(0,e.useState)(!1),[l,m]=(0,e.useState)(!1),[n,o]=(0,e.useState)(null),[p,q]=(0,e.useState)(null),[r,s]=(0,e.useState)(!1),[t,u]=(0,e.useState)({name:"openai",apiKey:"",enabled:!0}),[v,w]=(0,e.useState)(null),x="zh"===a?{title:"LLM 提供商管理",addProvider:"添加提供商",providerName:"提供商名称",apiKey:"API 密钥",baseUrl:"基础 URL",enabled:"启用",disabled:"禁用",connected:"已连接",disconnected:"未连接",error:"错误",testing:"测试中",testConnection:"测试连接",testAll:"测试所有连接",save:"保存",cancel:"取消",edit:"编辑",delete:"删除",enable:"启用",disable:"禁用",status:"状态",models:"模型",lastTested:"最后测试",latency:"延迟",noModels:"无可用模型",toolCalling:"支持工具调用",maxTokens:"最大令牌数",loading:"加载中...",saving:"保存中...",testingConnection:"测试连接中...",connectionSuccess:"连接成功",connectionFailed:"连接失败",providerAdded:"提供商已添加",providerUpdated:"提供商已更新",providerDeleted:"提供商已删除",confirmDelete:"确定要删除此提供商吗？",apiKeyPlaceholder:"输入 API 密钥",baseUrlPlaceholder:"可选，留空使用默认值",selectProvider:"选择提供商类型",openai:"OpenAI",deepseek:"DeepSeek",openrouter:"OpenRouter",note:"注意：API 密钥将安全加密存储在服务器上，从不暴露给客户端。",securityNote:"安全提示：所有 API 密钥都使用 AES 加密存储，仅在服务器端使用，从不发送到客户端。",maskedKey:"密钥已加密存储",enterNewKey:"输入新密钥以更新",keepExisting:"保持现有密钥",providerOverview:"提供商概览",availableProviders:"可用提供商",configuredProviders:"已配置提供商",totalModels:"总模型数",toolSupportedModels:"支持工具调用的模型",refreshStatus:"刷新状态",viewDetails:"查看详情",hideDetails:"隐藏详情",modelDetails:"模型详情",providerDetails:"提供商详情",connectionDetails:"连接详情",ms:"毫秒",never:"从未",unknown:"未知",required:"必填",optional:"可选",validationError:"验证错误",networkError:"网络错误",authError:"认证错误",serverError:"服务器错误",retryConnection:"重试连接",autoTest:"自动测试",manualTest:"手动测试"}:{title:"LLM Provider Management",addProvider:"Add Provider",providerName:"Provider Name",apiKey:"API Key",baseUrl:"Base URL",enabled:"Enabled",disabled:"Disabled",connected:"Connected",disconnected:"Disconnected",error:"Error",testing:"Testing",testConnection:"Test Connection",testAll:"Test All Connections",save:"Save",cancel:"Cancel",edit:"Edit",delete:"Delete",enable:"Enable",disable:"Disable",status:"Status",models:"Models",lastTested:"Last Tested",latency:"Latency",noModels:"No models available",toolCalling:"Supports Tool Calling",maxTokens:"Max Tokens",loading:"Loading...",saving:"Saving...",testingConnection:"Testing connection...",connectionSuccess:"Connection successful",connectionFailed:"Connection failed",providerAdded:"Provider added",providerUpdated:"Provider updated",providerDeleted:"Provider deleted",confirmDelete:"Are you sure you want to delete this provider?",apiKeyPlaceholder:"Enter API key",baseUrlPlaceholder:"Optional, leave empty for default",selectProvider:"Select provider type",openai:"OpenAI",deepseek:"DeepSeek",openrouter:"OpenRouter",note:"Note: API keys are securely encrypted and stored on the server, never exposed to the client.",securityNote:"Security: All API keys are encrypted with AES and stored server-side only, never sent to the client.",maskedKey:"Key is encrypted and stored",enterNewKey:"Enter new key to update",keepExisting:"Keep existing key",providerOverview:"Provider Overview",availableProviders:"Available Providers",configuredProviders:"Configured Providers",totalModels:"Total Models",toolSupportedModels:"Tool-Calling Models",refreshStatus:"Refresh Status",viewDetails:"View Details",hideDetails:"Hide Details",modelDetails:"Model Details",providerDetails:"Provider Details",connectionDetails:"Connection Details",ms:"ms",never:"Never",unknown:"Unknown",required:"Required",optional:"Optional",validationError:"Validation Error",networkError:"Network Error",authError:"Authentication Error",serverError:"Server Error",retryConnection:"Retry Connection",autoTest:"Auto Test",manualTest:"Manual Test"},y=(0,e.useCallback)((a,b)=>{w({type:a,message:b})},[]),z=async()=>{try{i(!0);let a=await fetch("/api/settings"),b=await a.json();if(b.success){c(b.data.llmProviders||[]);let a={};for(let c of b.data.llmProviders||[])a[c.id]={id:c.id,status:c.enabled?"disconnected":"disabled",models:c.models||[]};g(a)}}catch(a){console.error("Failed to load providers:",a)}finally{i(!1)}},A=async(a,d=!0)=>{let e=b.find(b=>b.id===a);if(!e)return;g(b=>({...b,[a]:{...b[a],status:"testing"}}));let f=Date.now();try{let h=await fetch("/api/settings/test-connection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:e.name,providerId:a})}),i=await h.json(),j=Date.now()-f;if(g(b=>({...b,[a]:{...b[a],status:i.success?"connected":"error",error:i.error,models:i.models?.map(a=>({id:a.id,name:a.name,displayName:a.name,supportsToolCalling:a.supportsToolCalling,maxTokens:4096})),lastTested:i.timestamp,latency:i.latency||j}})),i.success&&i.models){let f=b.map(b=>b.id===a?{...b,models:i.models.map(a=>({id:a.id,name:a.name,displayName:a.name,supportsToolCalling:a.supportsToolCalling,maxTokens:4096}))}:b);c(f),await C(f),d&&y("success",`${x.connectionSuccess}: ${e.name}`)}else d&&y("error",`${x.connectionFailed}: ${e.name} - ${i.error}`)}catch(c){console.error("Connection test failed:",c);let b=Date.now()-f;g(c=>({...c,[a]:{...c[a],status:"error",error:"Connection test failed",latency:b}})),d&&y("error",`${x.connectionFailed}: ${e.name}`)}},B=async()=>{s(!0);let a=b.filter(a=>a.enabled&&a.apiKey&&!a.apiKey.includes("*"));y("info",`Testing ${a.length} providers...`);try{let b=a.map(a=>A(a.id,!1));await Promise.allSettled(b);let c=Object.values(f).filter(a=>"connected"===a.status).length;y("success",`Testing complete: ${c}/${a.length} providers connected`)}catch(a){y("error","Failed to test all connections")}finally{s(!1)}},C=async a=>{try{k(!0);let b=await fetch("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({llmProviders:a})}),c=await b.json();if(!c.success)throw Error(c.error||"Failed to save providers");return!0}catch(a){return console.error("Failed to save providers:",a),!1}finally{k(!1)}},D=async()=>{if(!t.name||!t.apiKey)return void y("error","Provider name and API key are required");if(!E(t.name,t.apiKey))return void y("error","Invalid API key format for selected provider");k(!0);try{let a={id:`${t.name}-${Date.now()}`,name:t.name,apiKey:t.apiKey,baseUrl:t.baseUrl||I(t.name),models:[],enabled:t.enabled},d=[...b,a];await C(d)?(c(d),g(b=>({...b,[a.id]:{id:a.id,status:a.enabled?"disconnected":"disabled",models:[]}})),m(!1),u({name:"openai",apiKey:"",enabled:!0}),y("success",x.providerAdded),a.enabled&&setTimeout(()=>A(a.id),500)):y("error","Failed to save provider")}catch(a){console.error("Failed to add provider:",a),y("error","Failed to add provider")}finally{k(!1)}},E=(a,b)=>{if(!b||b.length<10)return!1;switch(a){case"openai":case"deepseek":return b.startsWith("sk-")&&b.length>20;case"openrouter":return b.startsWith("sk-or-")&&b.length>30;default:return b.length>10}},F=async(a,d)=>{let e=b.map(b=>b.id===a?{...b,...d}:b);await C(e)&&(c(e),o(null),"enabled"in d&&g(b=>({...b,[a]:{...b[a],status:d.enabled?"disconnected":"disabled"}})))},G=async a=>{if(!confirm(x.confirmDelete))return;let d=b.filter(b=>b.id!==a);await C(d)&&(c(d),g(b=>{let c={...b};return delete c[a],c}))},H=async a=>{let c=b.find(b=>b.id===a);c&&await F(a,{enabled:!c.enabled})},I=a=>{switch(a){case"openai":return"https://api.openai.com/v1";case"deepseek":return"https://api.deepseek.com/v1";case"openrouter":return"https://openrouter.ai/api/v1";default:return""}},J=a=>{switch(a){case"connected":return x.connected;case"testing":return x.testing;case"error":return x.error;case"disabled":return x.disabled;default:return x.disconnected}};if(h)return(0,d.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,d.jsx)("div",{className:"ml-3 text-gray-500 dark:text-gray-400",children:x.loading})]});let K=b.length,L=b.filter(a=>a.enabled).length,M=Object.values(f).filter(a=>"connected"===a.status).length,N=Object.values(f).reduce((a,b)=>a+(b.models?.length||0),0),O=Object.values(f).reduce((a,b)=>a+(b.models?.filter(a=>a.supportsToolCalling).length||0),0);return(0,d.jsxs)("div",{className:"space-y-6",children:[v&&(0,d.jsx)("div",{className:`p-4 rounded-lg border-l-4 ${"success"===v.type?"bg-green-50 border-green-400 text-green-700 dark:bg-green-900/20 dark:text-green-400":"error"===v.type?"bg-red-50 border-red-400 text-red-700 dark:bg-red-900/20 dark:text-red-400":"bg-blue-50 border-blue-400 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400"}`,children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("p",{className:"text-sm font-medium",children:v.message}),(0,d.jsx)("button",{onClick:()=>w(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"\xd7"})]})}),(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold",children:x.title}),(0,d.jsxs)("div",{className:"flex space-x-2",children:[(0,d.jsx)("button",{onClick:B,disabled:r||0===L,className:"inline-flex items-center justify-center rounded-md bg-gray-100 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-200 transition-colors disabled:opacity-50 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600",children:r?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600 mr-2"}),x.testing]}):x.testAll}),(0,d.jsx)("button",{onClick:()=>m(!0),className:"inline-flex items-center justify-center rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 transition-colors",disabled:j,children:x.addProvider})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,d.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 dark:bg-gray-800 dark:border-gray-700",children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:K}),(0,d.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:x.configuredProviders})]}),(0,d.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 dark:bg-gray-800 dark:border-gray-700",children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-green-600",children:M}),(0,d.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:x.connected})]}),(0,d.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 dark:bg-gray-800 dark:border-gray-700",children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:N}),(0,d.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:x.totalModels})]}),(0,d.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 dark:bg-gray-800 dark:border-gray-700",children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:O}),(0,d.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:x.toolSupportedModels})]})]}),(0,d.jsx)("div",{className:"text-sm text-gray-600 bg-gray-50 p-4 rounded-lg border-l-4 border-blue-400 dark:text-gray-400 dark:bg-gray-700",children:(0,d.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,d.jsx)("div",{className:"flex-shrink-0 w-5 h-5 text-blue-500 mt-0.5",children:"\uD83D\uDD12"}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("p",{className:"font-medium mb-1",children:[x.note.split(":")[0],":"]}),(0,d.jsx)("p",{children:x.securityNote})]})]})}),(0,d.jsxs)("div",{className:"space-y-4",children:[b.map(a=>{let e=f[a.id],g=n===a.id,h=p===a.id;return(0,d.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg dark:bg-gray-800 dark:border-gray-700",children:[(0,d.jsxs)("div",{className:"p-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("div",{className:`w-3 h-3 rounded-full ${(a=>{switch(a){case"connected":return"bg-green-500";case"testing":return"bg-yellow-500 animate-pulse";case"error":return"bg-red-500";case"disabled":return"bg-gray-400";default:return"bg-gray-500"}})(e?.status||"disconnected")}`}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-medium capitalize",children:a.name}),(0,d.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[(0,d.jsx)("span",{children:J(e?.status||"disconnected")}),e?.latency&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{children:"•"}),(0,d.jsxs)("span",{children:[e.latency,x.ms]})]}),e?.models&&e.models.length>0&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{children:"•"}),(0,d.jsxs)("span",{children:[e.models.length," ",x.models.toLowerCase()]})]})]})]})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("button",{onClick:()=>q(h?null:a.id),className:"text-sm px-3 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 border border-gray-300 dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-gray-600",children:h?x.hideDetails:x.viewDetails}),(0,d.jsx)("button",{onClick:()=>A(a.id),disabled:e?.status==="testing"||!a.enabled,className:"text-sm px-3 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 disabled:opacity-50 border border-gray-300 dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-gray-600",children:e?.status==="testing"?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-gray-600 mr-1 inline-block"}),x.testing]}):x.testConnection}),(0,d.jsx)("button",{onClick:()=>o(g?null:a.id),className:"text-sm px-3 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 border border-gray-300 dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-gray-600",children:g?x.cancel:x.edit}),(0,d.jsx)("button",{onClick:()=>H(a.id),className:`text-sm px-3 py-1 rounded transition-colors ${a.enabled?"bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/30":"bg-green-100 text-green-700 hover:bg-green-200 dark:bg-green-900/20 dark:text-green-400 dark:hover:bg-green-900/30"}`,children:a.enabled?x.disable:x.enable}),(0,d.jsx)("button",{onClick:()=>G(a.id),className:"text-sm px-3 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/30",children:x.delete})]})]}),e?.error&&(0,d.jsx)("div",{className:"text-sm text-red-600 bg-red-50 p-2 rounded mb-3 dark:bg-red-900/20 dark:text-red-400",children:(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("span",{children:"⚠️"}),(0,d.jsx)("span",{children:e.error})]})}),e?.lastTested&&(0,d.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[x.lastTested,": ",new Date(e.lastTested).toLocaleString()]})]}),h&&(0,d.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4 bg-gray-50 dark:bg-gray-700/50",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"text-sm font-medium mb-3",children:x.providerDetails}),(0,d.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsxs)("span",{className:"text-gray-500 dark:text-gray-400",children:[x.providerName,":"]}),(0,d.jsx)("span",{className:"capitalize",children:a.name})]}),(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsxs)("span",{className:"text-gray-500 dark:text-gray-400",children:[x.baseUrl,":"]}),(0,d.jsx)("span",{className:"truncate ml-2",children:a.baseUrl||x.unknown})]}),(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsxs)("span",{className:"text-gray-500 dark:text-gray-400",children:[x.apiKey,":"]}),(0,d.jsx)("span",{className:"font-mono text-xs",children:a.apiKey.includes("*")?x.maskedKey:"••••••••"})]}),(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsxs)("span",{className:"text-gray-500 dark:text-gray-400",children:[x.status,":"]}),(0,d.jsx)("span",{className:`font-medium ${e?.status==="connected"?"text-green-600":e?.status==="error"?"text-red-600":e?.status==="testing"?"text-yellow-600":"text-gray-600"}`,children:J(e?.status||"disconnected")})]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"text-sm font-medium mb-3",children:x.connectionDetails}),(0,d.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsxs)("span",{className:"text-gray-500 dark:text-gray-400",children:[x.lastTested,":"]}),(0,d.jsx)("span",{children:e?.lastTested?new Date(e.lastTested).toLocaleString():x.never})]}),(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsxs)("span",{className:"text-gray-500 dark:text-gray-400",children:[x.latency,":"]}),(0,d.jsx)("span",{children:e?.latency?`${e.latency}${x.ms}`:x.unknown})]}),(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsxs)("span",{className:"text-gray-500 dark:text-gray-400",children:[x.totalModels,":"]}),(0,d.jsx)("span",{children:e?.models?.length||0})]}),(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsxs)("span",{className:"text-gray-500 dark:text-gray-400",children:[x.toolSupportedModels,":"]}),(0,d.jsx)("span",{children:e?.models?.filter(a=>a.supportsToolCalling).length||0})]})]})]})]}),e?.models&&e.models.length>0&&(0,d.jsxs)("div",{className:"mt-6",children:[(0,d.jsx)("h4",{className:"text-sm font-medium mb-3",children:x.modelDetails}),(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:e.models.map(a=>(0,d.jsxs)("div",{className:"text-sm p-3 bg-white rounded border dark:bg-gray-800 dark:border-gray-600",children:[(0,d.jsx)("div",{className:"font-medium mb-1",children:a.displayName}),(0,d.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 space-y-1",children:[(0,d.jsxs)("div",{children:["ID: ",a.id]}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("span",{className:`w-2 h-2 rounded-full ${a.supportsToolCalling?"bg-green-500":"bg-gray-400"}`}),(0,d.jsx)("span",{children:a.supportsToolCalling?x.toolCalling:"No tool calling"})]}),(0,d.jsxs)("div",{children:[x.maxTokens,": ",a.maxTokens?.toLocaleString()||"N/A"]})]})]},a.id))})]})]}),g&&(0,d.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4 bg-gray-50 dark:bg-gray-700/50",children:[(0,d.jsxs)("h4",{className:"text-sm font-medium mb-3",children:[x.edit," ",a.name]}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:`edit-api-key-${a.id}`,className:"block text-sm font-medium mb-1",children:[x.apiKey," ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsx)("input",{id:`edit-api-key-${a.id}`,type:"password",placeholder:a.apiKey.includes("*")?x.enterNewKey:x.apiKeyPlaceholder,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white text-gray-900 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:border-blue-400",onChange:d=>{c(b.map(b=>b.id===a.id?{...b,apiKey:d.target.value}:b))}}),a.apiKey.includes("*")&&(0,d.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:x.maskedKey})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:`edit-base-url-${a.id}`,className:"block text-sm font-medium mb-1",children:[x.baseUrl," ",(0,d.jsxs)("span",{className:"text-gray-400",children:["(",x.optional,")"]})]}),(0,d.jsx)("input",{id:`edit-base-url-${a.id}`,type:"url",value:a.baseUrl||"",placeholder:x.baseUrlPlaceholder,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white text-gray-900 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:border-blue-400",onChange:d=>{c(b.map(b=>b.id===a.id?{...b,baseUrl:d.target.value}:b))}})]}),(0,d.jsxs)("div",{className:"flex space-x-2 pt-2",children:[(0,d.jsx)("button",{onClick:()=>F(a.id,b.find(b=>b.id===a.id)),disabled:j,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 transition-colors",children:j?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2 inline-block"}),x.saving]}):x.save}),(0,d.jsx)("button",{onClick:()=>{o(null),z()},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 border border-gray-300 dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-gray-600 transition-colors",children:x.cancel})]})]})]})]},a.id)}),0===b.length&&(0,d.jsxs)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[(0,d.jsx)("div",{className:"text-4xl mb-4",children:"\uD83E\uDD16"}),(0,d.jsx)("p",{className:"text-lg font-medium mb-2",children:"No providers configured"}),(0,d.jsx)("p",{className:"text-sm",children:"Add your first LLM provider to get started"})]})]}),l&&(0,d.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg dark:bg-gray-800 dark:border-gray-700",children:[(0,d.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,d.jsx)("h3",{className:"font-medium",children:x.addProvider}),(0,d.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Configure a new LLM provider for chat sessions"})]}),(0,d.jsxs)("div",{className:"p-4 space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:"provider-name-select",className:"block text-sm font-medium mb-1",children:[x.providerName," ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsxs)("select",{id:"provider-name-select",value:t.name,onChange:a=>u(b=>({...b,name:a.target.value,baseUrl:I(a.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white text-gray-900 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:border-blue-400",children:[(0,d.jsx)("option",{value:"openai",children:x.openai}),(0,d.jsx)("option",{value:"deepseek",children:x.deepseek}),(0,d.jsx)("option",{value:"openrouter",children:x.openrouter})]}),(0,d.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Select the LLM provider type"})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:"api-key-input",className:"block text-sm font-medium mb-1",children:[x.apiKey," ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsx)("input",{id:"api-key-input",type:"password",value:t.apiKey,placeholder:x.apiKeyPlaceholder,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white text-gray-900 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:border-blue-400",onChange:a=>u(b=>({...b,apiKey:a.target.value}))}),(0,d.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["openai"===t.name&&"Starts with sk- (e.g., sk-...)","deepseek"===t.name&&"Starts with sk- (e.g., sk-...)","openrouter"===t.name&&"Starts with sk-or- (e.g., sk-or-...)"]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:"base-url-input",className:"block text-sm font-medium mb-1",children:[x.baseUrl," ",(0,d.jsxs)("span",{className:"text-gray-400",children:["(",x.optional,")"]})]}),(0,d.jsx)("input",{id:"base-url-input",type:"url",value:t.baseUrl||"",placeholder:x.baseUrlPlaceholder,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white text-gray-900 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:border-blue-400",onChange:a=>u(b=>({...b,baseUrl:a.target.value}))}),(0,d.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Default: ",I(t.name)]})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("input",{type:"checkbox",id:"enabled-new",checked:t.enabled,onChange:a=>u(b=>({...b,enabled:a.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700"}),(0,d.jsx)("label",{htmlFor:"enabled-new",className:"text-sm",children:x.enabled}),(0,d.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"(Enable immediately after adding)"})]}),t.apiKey&&(0,d.jsx)("div",{className:`text-xs p-2 rounded ${E(t.name,t.apiKey)?"bg-green-50 text-green-700 dark:bg-green-900/20 dark:text-green-400":"bg-red-50 text-red-700 dark:bg-red-900/20 dark:text-red-400"}`,children:E(t.name,t.apiKey)?"✓ API key format looks valid":"⚠ API key format may be invalid"}),(0,d.jsxs)("div",{className:"flex space-x-2 pt-2",children:[(0,d.jsx)("button",{onClick:D,disabled:!t.name||!t.apiKey||j||!E(t.name,t.apiKey),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 transition-colors",children:j?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2 inline-block"}),x.saving]}):x.save}),(0,d.jsx)("button",{onClick:()=>{m(!1),u({name:"openai",apiKey:"",enabled:!0})},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 border border-gray-300 dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-gray-600 transition-colors",children:x.cancel})]})]})]})]})}function g({language:a="en"}){let[b,c]=(0,e.useState)({}),[f,g]=(0,e.useState)({}),[h,i]=(0,e.useState)({}),[j,k]=(0,e.useState)(!0),[l,m]=(0,e.useState)(null),[n,o]=(0,e.useState)(null),[p,q]=(0,e.useState)(""),[r,s]=(0,e.useState)(!1),[t,u]=(0,e.useState)({id:"",command:"",args:[],env:{},disabled:!1,timeout:3e4,maxConcurrency:5}),[v,w]=(0,e.useState)(null),x="zh"===a?{mcpServers:"MCP 服务器",serverConfiguration:"MCP 服务器配置",addServer:"添加服务器",editServer:"编辑服务器",deleteServer:"删除服务器",testConnection:"测试连接",enableServer:"启用服务器",disableServer:"禁用服务器",serverStatus:"服务器状态",availableTools:"可用工具",connectionStatus:"连接状态",lastCheck:"最后检查",responseTime:"响应时间",uptime:"运行时间",toolCount:"工具数量",serverDetails:"服务器详情",command:"命令",arguments:"参数",environment:"环境变量",timeout:"超时时间",maxConcurrency:"最大并发",serverId:"服务器ID",save:"保存",cancel:"取消",delete:"删除",edit:"编辑",test:"测试",enable:"启用",disable:"禁用",refresh:"刷新",connected:"已连接",disconnected:"已断开",error:"错误",connecting:"连接中",healthy:"健康",unhealthy:"不健康",unknown:"未知",noServers:"未配置服务器",noTools:"无可用工具",configurationEditor:"配置编辑器",jsonConfiguration:"JSON 配置",invalidJson:"无效的 JSON 格式",serverAdded:"服务器已添加",serverUpdated:"服务器已更新",serverDeleted:"服务器已删除",connectionTested:"连接已测试",errorOccurred:"发生错误",confirmDelete:"确认删除",deleteConfirmation:'确定要删除服务器 "{name}" 吗？此操作无法撤销。',troubleshooting:"故障排除",troubleshootingTips:"故障排除提示",checkCommand:"检查命令路径是否正确",checkArgs:"验证参数格式",checkEnv:"确认环境变量设置",checkPermissions:"检查文件权限",viewLogs:"查看日志",reconnect:"重新连接",ms:"毫秒",seconds:"秒",minutes:"分钟",hours:"小时",days:"天"}:{mcpServers:"MCP Servers",serverConfiguration:"MCP Server Configuration",addServer:"Add Server",editServer:"Edit Server",deleteServer:"Delete Server",testConnection:"Test Connection",enableServer:"Enable Server",disableServer:"Disable Server",serverStatus:"Server Status",availableTools:"Available Tools",connectionStatus:"Connection Status",lastCheck:"Last Check",responseTime:"Response Time",uptime:"Uptime",toolCount:"Tool Count",serverDetails:"Server Details",command:"Command",arguments:"Arguments",environment:"Environment Variables",timeout:"Timeout",maxConcurrency:"Max Concurrency",serverId:"Server ID",save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",test:"Test",enable:"Enable",disable:"Disable",refresh:"Refresh",connected:"Connected",disconnected:"Disconnected",error:"Error",connecting:"Connecting",healthy:"Healthy",unhealthy:"Unhealthy",unknown:"Unknown",noServers:"No servers configured",noTools:"No tools available",configurationEditor:"Configuration Editor",jsonConfiguration:"JSON Configuration",invalidJson:"Invalid JSON format",serverAdded:"Server added",serverUpdated:"Server updated",serverDeleted:"Server deleted",connectionTested:"Connection tested",errorOccurred:"An error occurred",confirmDelete:"Confirm Delete",deleteConfirmation:'Are you sure you want to delete server "{name}"? This action cannot be undone.',troubleshooting:"Troubleshooting",troubleshootingTips:"Troubleshooting Tips",checkCommand:"Check if command path is correct",checkArgs:"Verify argument format",checkEnv:"Confirm environment variable settings",checkPermissions:"Check file permissions",viewLogs:"View Logs",reconnect:"Reconnect",ms:"ms",seconds:"seconds",minutes:"minutes",hours:"hours",days:"days"},y=async()=>{try{k(!0);let a=await fetch("/api/settings/mcp-servers");if(!a.ok)throw Error(`HTTP ${a.status}: ${a.statusText}`);let b=await a.json();c(b.mcpServers||{})}catch(a){console.error("Failed to load MCP servers:",a),m(a instanceof Error?a.message:"Failed to load servers")}finally{k(!1)}},z=async()=>{try{let a=await fetch("/api/settings/mcp-servers/status");if(a.ok){let b=await a.json();g(b)}}catch(a){console.error("Failed to load server statuses:",a)}},A=async()=>{try{let a=await fetch("/api/settings/mcp-servers/tools");if(a.ok){let b=await a.json();i(b)}}catch(a){console.error("Failed to load server tools:",a)}},B=async(a,b)=>{try{let c=await fetch("/api/settings/mcp-servers",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({serverId:a,config:b})});if(!c.ok)throw Error(`HTTP ${c.status}: ${c.statusText}`);await y(),await z(),o(null),s(!1),m(null)}catch(a){console.error("Failed to save server:",a),m(a instanceof Error?a.message:"Failed to save server")}},C=async a=>{if(confirm(x.deleteConfirmation.replace("{name}",a)))try{let b=await fetch(`/api/settings/mcp-servers/${a}`,{method:"DELETE"});if(!b.ok)throw Error(`HTTP ${b.status}: ${b.statusText}`);await y(),await z()}catch(a){console.error("Failed to delete server:",a),m(a instanceof Error?a.message:"Failed to delete server")}},D=async a=>{try{w(a);let b=await fetch(`/api/settings/mcp-servers/${a}/test`,{method:"POST"});if(!b.ok)throw Error(`HTTP ${b.status}: ${b.statusText}`);await b.json(),await z(),await A(),m(null)}catch(a){console.error("Failed to test connection:",a),m(a instanceof Error?a.message:"Connection test failed")}finally{w(null)}},E=async(a,c)=>{let d=b[a];d&&await B(a,{...d,disabled:!c})},F=async()=>{if(n)try{let a=JSON.parse(p);await B(n,a)}catch(a){m(x.invalidJson)}},G=async()=>{if(!t.id||!t.command)return void m("Server ID and command are required");await B(t.id,{command:t.command,args:t.args,env:t.env,disabled:t.disabled,timeout:t.timeout,maxConcurrency:t.maxConcurrency}),u({id:"",command:"",args:[],env:{},disabled:!1,timeout:3e4,maxConcurrency:5})};return j?(0,d.jsx)("div",{className:"space-y-4",children:(0,d.jsxs)("div",{className:"animate-pulse",children:[(0,d.jsx)("div",{className:"h-4 bg-muted rounded w-1/4 mb-4"}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)("div",{className:"h-16 bg-muted rounded"}),(0,d.jsx)("div",{className:"h-16 bg-muted rounded"})]})]})}):(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("h3",{className:"text-lg font-medium",children:x.serverConfiguration}),(0,d.jsxs)("div",{className:"flex space-x-2",children:[(0,d.jsx)("button",{onClick:z,className:"inline-flex items-center justify-center rounded-md border border-input bg-background px-3 py-2 text-sm font-medium hover:bg-accent hover:text-accent-foreground transition-colors",children:x.refresh}),(0,d.jsx)("button",{onClick:()=>s(!0),className:"inline-flex items-center justify-center rounded-md bg-primary px-3 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90 transition-colors",children:x.addServer})]})]}),l&&(0,d.jsxs)("div",{className:"bg-destructive/10 border border-destructive/20 text-destructive px-4 py-3 rounded-lg",children:[(0,d.jsx)("p",{className:"text-sm",children:l}),(0,d.jsx)("button",{onClick:()=>m(null),className:"text-xs underline mt-1",children:"Dismiss"})]}),0===Object.keys(b).length?(0,d.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:(0,d.jsx)("p",{children:x.noServers})}):(0,d.jsx)("div",{className:"space-y-4",children:Object.entries(b).map(([a,c])=>{let e=f[a],g=h[a]||[],i=n===a;return(0,d.jsxs)("div",{className:"border rounded-lg p-4 space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("div",{className:`w-3 h-3 rounded-full ${(a=>{switch(a){case"connected":case"healthy":return"bg-green-500";case"error":case"unhealthy":return"bg-red-500";default:return"bg-yellow-500"}})(e?.status||"unknown")}`}),(0,d.jsx)("h4",{className:"font-medium",children:a}),(0,d.jsx)("span",{className:"text-sm text-muted-foreground",children:(a=>{switch(a){case"connected":return x.connected;case"disconnected":return x.disconnected;case"error":return x.error;case"connecting":return x.connecting;case"healthy":return x.healthy;case"unhealthy":return x.unhealthy;default:return x.unknown}})(e?.status||"unknown")})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("button",{onClick:()=>D(a),disabled:v===a,className:"text-sm px-3 py-1 border rounded hover:bg-accent transition-colors disabled:opacity-50",children:v===a?"...":x.test}),(0,d.jsx)("button",{onClick:()=>E(a,!!c.disabled),className:`text-sm px-3 py-1 border rounded transition-colors ${c.disabled?"bg-green-50 text-green-700 border-green-200 hover:bg-green-100":"bg-red-50 text-red-700 border-red-200 hover:bg-red-100"}`,children:c.disabled?x.enable:x.disable}),(0,d.jsx)("button",{onClick:()=>(a=>{let c=b[a];c&&(o(a),q(JSON.stringify({command:c.command,args:c.args||[],env:c.env||{},disabled:c.disabled||!1,timeout:c.timeout||3e4,maxConcurrency:c.maxConcurrency||5},null,2)))})(a),className:"text-sm px-3 py-1 border rounded hover:bg-accent transition-colors",children:x.edit}),(0,d.jsx)("button",{onClick:()=>C(a),className:"text-sm px-3 py-1 border border-red-200 text-red-700 rounded hover:bg-red-50 transition-colors",children:x.delete})]})]}),i?(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-2",children:x.jsonConfiguration}),(0,d.jsx)("textarea",{value:p,onChange:a=>q(a.target.value),className:"w-full h-64 p-3 border rounded-md font-mono text-sm bg-background",placeholder:"Enter JSON configuration..."})]}),(0,d.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,d.jsx)("button",{onClick:()=>o(null),className:"px-4 py-2 border rounded-md hover:bg-accent transition-colors",children:x.cancel}),(0,d.jsx)("button",{onClick:F,className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:x.save})]})]}):(0,d.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[(0,d.jsx)("div",{children:(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("span",{className:"font-medium",children:[x.command,":"]}),(0,d.jsx)("span",{className:"ml-2 font-mono bg-muted px-2 py-1 rounded",children:c.command})]}),c.args&&c.args.length>0&&(0,d.jsxs)("div",{children:[(0,d.jsxs)("span",{className:"font-medium",children:[x.arguments,":"]}),(0,d.jsx)("div",{className:"ml-2 space-y-1",children:c.args.map((a,b)=>(0,d.jsx)("div",{className:"font-mono bg-muted px-2 py-1 rounded text-xs",children:a},b))})]}),c.env&&Object.keys(c.env).length>0&&(0,d.jsxs)("div",{children:[(0,d.jsxs)("span",{className:"font-medium",children:[x.environment,":"]}),(0,d.jsx)("div",{className:"ml-2 space-y-1",children:Object.entries(c.env).map(([a,b])=>(0,d.jsxs)("div",{className:"font-mono bg-muted px-2 py-1 rounded text-xs",children:[a,"=",b]},a))})]})]})}),(0,d.jsx)("div",{children:e&&(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("span",{className:"font-medium",children:[x.lastCheck,":"]}),(0,d.jsx)("span",{className:"ml-2",children:new Date(e.lastCheck).toLocaleString()})]}),e.responseTime&&(0,d.jsxs)("div",{children:[(0,d.jsxs)("span",{className:"font-medium",children:[x.responseTime,":"]}),(0,d.jsxs)("span",{className:"ml-2",children:[e.responseTime,x.ms]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("span",{className:"font-medium",children:[x.uptime,":"]}),(0,d.jsx)("span",{className:"ml-2",children:(a=>{if(!a)return"-";let b=Math.floor(a/1e3),c=Math.floor(b/60),d=Math.floor(c/60),e=Math.floor(d/24);return e>0?`${e} ${x.days}`:d>0?`${d} ${x.hours}`:c>0?`${c} ${x.minutes}`:`${b} ${x.seconds}`})(e.uptime)})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("span",{className:"font-medium",children:[x.toolCount,":"]}),(0,d.jsx)("span",{className:"ml-2",children:e.toolCount})]})]})})]}),!i&&g.length>0&&(0,d.jsxs)("div",{children:[(0,d.jsx)("h5",{className:"font-medium mb-2",children:x.availableTools}),(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:g.map(b=>(0,d.jsxs)("div",{className:"bg-muted/50 p-2 rounded text-sm",children:[(0,d.jsx)("div",{className:"font-medium",children:b.name.replace(`${a}.`,"")}),b.description&&(0,d.jsx)("div",{className:"text-muted-foreground text-xs mt-1",children:b.description})]},b.name))})]}),!i&&e?.status==="unhealthy"&&(0,d.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 p-3 rounded-lg",children:[(0,d.jsx)("h5",{className:"font-medium text-yellow-800 mb-2",children:x.troubleshootingTips}),(0,d.jsxs)("ul",{className:"text-sm text-yellow-700 space-y-1",children:[(0,d.jsxs)("li",{children:["• ",x.checkCommand]}),(0,d.jsxs)("li",{children:["• ",x.checkArgs]}),(0,d.jsxs)("li",{children:["• ",x.checkEnv]}),(0,d.jsxs)("li",{children:["• ",x.checkPermissions]})]}),e.error&&(0,d.jsx)("div",{className:"mt-2 p-2 bg-yellow-100 rounded text-xs font-mono",children:e.error})]})]},a)})}),r&&(0,d.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,d.jsxs)("div",{className:"bg-background border rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,d.jsx)("h3",{className:"text-lg font-medium mb-4",children:x.addServer}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-1",children:x.serverId}),(0,d.jsx)("input",{type:"text",value:t.id,onChange:a=>u(b=>({...b,id:a.target.value})),className:"w-full p-2 border rounded-md",placeholder:"e.g., filesystem"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-1",children:x.command}),(0,d.jsx)("input",{type:"text",value:t.command,onChange:a=>u(b=>({...b,command:a.target.value})),className:"w-full p-2 border rounded-md",placeholder:"e.g., npx"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-1",children:x.arguments}),(0,d.jsx)("textarea",{value:t.args.join("\n"),onChange:a=>u(b=>({...b,args:a.target.value.split("\n").filter(a=>a.trim())})),className:"w-full p-2 border rounded-md h-24",placeholder:"One argument per line"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-medium mb-1",children:[x.timeout," (ms)"]}),(0,d.jsx)("input",{type:"number",value:t.timeout,onChange:a=>u(b=>({...b,timeout:parseInt(a.target.value)||3e4})),className:"w-full p-2 border rounded-md"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-1",children:x.maxConcurrency}),(0,d.jsx)("input",{type:"number",value:t.maxConcurrency,onChange:a=>u(b=>({...b,maxConcurrency:parseInt(a.target.value)||5})),className:"w-full p-2 border rounded-md"})]})]})]}),(0,d.jsxs)("div",{className:"flex justify-end space-x-2 mt-6",children:[(0,d.jsx)("button",{onClick:()=>s(!1),className:"px-4 py-2 border rounded-md hover:bg-accent transition-colors",children:x.cancel}),(0,d.jsx)("button",{onClick:G,className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:x.save})]})]})})]})}var h=c(91953),i=c(16457);let j=a=>{let b,c=new Set,d=(a,d)=>{let e="function"==typeof a?a(b):a;if(!Object.is(e,b)){let a=b;b=(null!=d?d:"object"!=typeof e||null===e)?e:Object.assign({},b,e),c.forEach(c=>c(b,a))}},e=()=>b,f={setState:d,getState:e,getInitialState:()=>g,subscribe:a=>(c.add(a),()=>c.delete(a))},g=b=a(d,e,f);return f},k=a=>{let b=(a=>a?j(a):j)(a),c=a=>(function(a,b=a=>a){let c=e.useSyncExternalStore(a.subscribe,e.useCallback(()=>b(a.getState()),[a,b]),e.useCallback(()=>b(a.getInitialState()),[a,b]));return e.useDebugValue(c),c})(b,a);return Object.assign(c,b),c},l=a=>a?k(a):k;function m(a,b){let c;try{c=a()}catch(a){return}return{getItem:a=>{var d;let e=a=>null===a?null:JSON.parse(a,null==b?void 0:b.reviver),f=null!=(d=c.getItem(a))?d:null;return f instanceof Promise?f.then(e):e(f)},setItem:(a,d)=>c.setItem(a,JSON.stringify(d,null==b?void 0:b.replacer)),removeItem:a=>c.removeItem(a)}}let n=a=>b=>{try{let c=a(b);if(c instanceof Promise)return c;return{then:a=>n(a)(c),catch(a){return this}}}catch(a){return{then(a){return this},catch:b=>n(b)(a)}}},o=(a,b)=>(c,d,e)=>{let f,g={storage:m(()=>localStorage),partialize:a=>a,version:0,merge:(a,b)=>({...b,...a}),...b},h=!1,i=new Set,j=new Set,k=g.storage;if(!k)return a((...a)=>{console.warn(`[zustand persist middleware] Unable to update item '${g.name}', the given storage is currently unavailable.`),c(...a)},d,e);let l=()=>{let a=g.partialize({...d()});return k.setItem(g.name,{state:a,version:g.version})},o=e.setState;e.setState=(a,b)=>{o(a,b),l()};let p=a((...a)=>{c(...a),l()},d,e);e.getInitialState=()=>p;let q=()=>{var a,b;if(!k)return;h=!1,i.forEach(a=>{var b;return a(null!=(b=d())?b:p)});let e=(null==(b=g.onRehydrateStorage)?void 0:b.call(g,null!=(a=d())?a:p))||void 0;return n(k.getItem.bind(k))(g.name).then(a=>{if(a)if("number"!=typeof a.version||a.version===g.version)return[!1,a.state];else{if(g.migrate){let b=g.migrate(a.state,a.version);return b instanceof Promise?b.then(a=>[!0,a]):[!0,b]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(a=>{var b;let[e,h]=a;if(c(f=g.merge(h,null!=(b=d())?b:p),!0),e)return l()}).then(()=>{null==e||e(f,void 0),f=d(),h=!0,j.forEach(a=>a(f))}).catch(a=>{null==e||e(void 0,a)})};return e.persist={setOptions:a=>{g={...g,...a},a.storage&&(k=a.storage)},clearStorage:()=>{null==k||k.removeItem(g.name)},getOptions:()=>g,rehydrate:()=>q(),hasHydrated:()=>h,onHydrate:a=>(i.add(a),()=>{i.delete(a)}),onFinishHydration:a=>(j.add(a),()=>{j.delete(a)})},g.skipHydration||q(),f||p},p={llmProviders:[{id:"default-openai",name:"openai",apiKey:"",baseUrl:"https://api.openai.com/v1",models:[{id:"gpt-4o",name:"GPT-4o",supportsToolCalling:!0,maxTokens:128e3},{id:"gpt-4o-mini",name:"GPT-4o Mini",supportsToolCalling:!0,maxTokens:128e3},{id:"gpt-4-turbo",name:"GPT-4 Turbo",supportsToolCalling:!0,maxTokens:128e3},{id:"gpt-4",name:"GPT-4",supportsToolCalling:!0,maxTokens:8192},{id:"gpt-3.5-turbo",name:"GPT-3.5 Turbo",supportsToolCalling:!0,maxTokens:16385}],enabled:!1}],mcpServers:[],preferences:{theme:"system",language:"en",autoScroll:!0,soundEnabled:!1,accessibility:{highContrast:!1,reducedMotion:!1,screenReaderAnnouncements:!0,keyboardNavigation:!0,focusVisible:!0,largeText:!1}}},q=()=>Date.now().toString(36)+Math.random().toString(36).substring(2),r="mcp-chat-ui-settings",s=a=>{try{if(!a||"object"!=typeof a)throw Error("Invalid settings object");let b={...a,llmProviders:(a.llmProviders||[]).map(a=>({...a,apiKey:""}))},c=JSON.stringify(b);localStorage.setItem(r,c)}catch(a){throw console.error("Failed to save settings to localStorage:",a),a}},t=()=>{try{let a=localStorage.getItem(r);if(!a)return{...p};let b=JSON.parse(a);if(!b||"object"!=typeof b)return console.warn("Invalid settings data in localStorage, using defaults"),{...p};return{...p,...b,llmProviders:(b.llmProviders||[]).map(a=>({id:a.id||q(),name:a.name||"openai",apiKey:"",baseUrl:a.baseUrl,models:a.models||[],enabled:!1!==a.enabled})),mcpServers:(b.mcpServers||[]).map(a=>({id:a.id||q(),name:a.name||"",command:a.command||"",args:Array.isArray(a.args)?a.args:[],env:a.env||{},enabled:!1!==a.enabled,status:a.status||"disconnected"})),preferences:{...p.preferences,...b.preferences}}}catch(a){return console.error("Failed to load settings from localStorage:",a),{...p}}},u=l()(o((a,b)=>({...p,isLoading:!1,isSaving:!1,addLLMProvider:c=>{let d={...c,id:q()};a(a=>({llmProviders:[...a.llmProviders,d]})),b().saveSettings()},updateLLMProvider:(c,d)=>{console.log("\uD83D\uDD27 updateLLMProvider called:",{id:c,config:d}),a(a=>({llmProviders:a.llmProviders.map(a=>a.id===c?{...a,...d}:a)})),console.log("\uD83D\uDCBE Calling saveSettings after updateLLMProvider"),b().saveSettings()},removeLLMProvider:c=>{a(a=>({llmProviders:a.llmProviders.filter(a=>a.id!==c)})),b().saveSettings()},toggleLLMProvider:c=>{a(a=>({llmProviders:a.llmProviders.map(a=>a.id===c?{...a,enabled:!a.enabled}:a)})),b().saveSettings()},testLLMConnection:async(a,b)=>{throw Error("Connection testing should use the backend API endpoint")},addMCPServer:c=>{let d={...c,id:q(),status:"disconnected"};a(a=>({mcpServers:[...a.mcpServers,d]})),b().saveSettings()},updateMCPServer:(c,d)=>{a(a=>({mcpServers:a.mcpServers.map(a=>a.id===c?{...a,...d}:a)})),b().saveSettings()},removeMCPServer:c=>{a(a=>({mcpServers:a.mcpServers.filter(a=>a.id!==c)})),b().saveSettings()},toggleMCPServer:c=>{a(a=>({mcpServers:a.mcpServers.map(a=>a.id===c?{...a,enabled:!a.enabled}:a)})),b().saveSettings()},testMCPConnection:async a=>{if(!b().mcpServers.find(b=>b.id===a))return!1;try{return await new Promise(a=>setTimeout(a,1e3)),b().updateMCPServer(a,{status:"connected"}),!0}catch(c){return console.error("MCP connection test failed:",c),b().updateMCPServer(a,{status:"error"}),!1}},updatePreferences:c=>{let{theme:d,language:e,...f}=c;Object.keys(f).length>0&&(a(a=>({preferences:{...a.preferences,...f}})),b().saveSettings()),d&&(localStorage.setItem("mcp-chat-ui-theme",d),x(d)),e&&(localStorage.setItem("mcp-chat-ui-language",e),y(e))},changeLanguage:b=>{localStorage.setItem("mcp-chat-ui-language",b),y(b),a(a=>({preferences:{...a.preferences,language:b}}))},changeTheme:b=>{localStorage.setItem("mcp-chat-ui-theme",b),x(b),a(a=>({preferences:{...a.preferences,theme:b}}))},loadSettings:async()=>{console.log("\uD83D\uDCE5 loadSettings called - loading from backend"),a({isLoading:!0});try{let c=await fetch("/api/settings");if(c.ok){let b=await c.json();console.log("\uD83D\uDCCA Backend settings loaded:",b);let d=localStorage.getItem("mcp-chat-ui-theme")||"system",e=localStorage.getItem("mcp-chat-ui-language")||"en";a({llmProviders:b.llmProviders||p.llmProviders,mcpServers:b.mcpServers||p.mcpServers,preferences:{...p.preferences,...b.preferences,theme:d,language:e}})}else{console.warn("Failed to load settings from backend, using local storage");let b=t(),c=localStorage.getItem("mcp-chat-ui-theme")||"system",d=localStorage.getItem("mcp-chat-ui-language")||"en";a({...b,preferences:{...b.preferences,theme:c,language:d}})}let d=b();x(d.preferences.theme),await y(d.preferences.language),a({isLoading:!1})}catch(e){console.error("Failed to load settings from backend:",e);let b=t(),c=localStorage.getItem("mcp-chat-ui-theme")||"system",d=localStorage.getItem("mcp-chat-ui-language")||"en";a({...b,preferences:{...b.preferences,theme:c,language:d}}),x(c),await y(d),a({isLoading:!1})}},saveSettings:async()=>{console.log("\uD83D\uDCBE saveSettings called - saving to backend"),a({isSaving:!0});try{let c=b(),d=c.llmProviders.map(a=>{let b=a.apiKey;return!b||b.includes("•")||b.includes("*")||""===b.trim()||"••••"===b?{...a,apiKey:""}:a}),{theme:e,language:f,...g}=c.preferences,h={llmProviders:d,mcpServers:c.mcpServers,preferences:g},i={...h,llmProviders:h.llmProviders.map(a=>({...a,apiKey:a.apiKey?"***masked***":"(empty)"}))};console.log("\uD83D\uDCE4 Sending settings to backend:",JSON.stringify(i,null,2));let j=await fetch("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(j.ok){let b=await j.json();console.log("✅ Settings saved to backend"),a({llmProviders:b.llmProviders||h.llmProviders,mcpServers:b.mcpServers||h.mcpServers,preferences:b.preferences||h.preferences}),s(h)}else{let a=`HTTP ${j.status}: ${j.statusText}`;try{let b=await j.json();b.message&&(a=b.message),console.error("❌ Backend error details:",b)}catch(a){console.error("❌ Failed to parse error response")}throw Error(`Failed to save settings to backend: ${a}`)}a({isSaving:!1})}catch(d){console.error("Failed to save settings:",d);let c=b();throw s({llmProviders:c.llmProviders,mcpServers:c.mcpServers,preferences:c.preferences}),a({isSaving:!1}),d}},resetSettings:()=>{a({...p}),localStorage.removeItem(r)},exportSettings:()=>{let a=b();return JSON.stringify({llmProviders:a.llmProviders,mcpServers:a.mcpServers,preferences:a.preferences},null,2)},importSettings:async c=>{try{if(!c||"string"!=typeof c)throw Error("Invalid settings JSON string");let d=JSON.parse(c);if(!d||"object"!=typeof d)throw Error("Invalid settings format: not an object");if(!Array.isArray(d.llmProviders))throw Error("Invalid settings format: llmProviders must be an array");if(!Array.isArray(d.mcpServers))throw Error("Invalid settings format: mcpServers must be an array");if(!d.preferences||"object"!=typeof d.preferences)throw Error("Invalid settings format: preferences must be an object");let e={llmProviders:d.llmProviders.map(a=>({id:a.id||q(),name:a.name||"openai",apiKey:"",baseUrl:a.baseUrl,models:Array.isArray(a.models)?a.models:[],enabled:!1!==a.enabled})),mcpServers:d.mcpServers.map(a=>({id:a.id||q(),name:a.name||"",command:a.command||"",args:Array.isArray(a.args)?a.args:[],env:a.env||{},enabled:!1!==a.enabled,status:a.status||"disconnected"})),preferences:{...p.preferences,...d.preferences}};return a({...p,...e}),await b().saveSettings(),!0}catch(a){return console.error("Failed to import settings:",a),!1}},importMCPServers:async c=>{try{let d=v(c);if(0===d.length)throw Error("No valid MCP servers found in configuration");return a(a=>({mcpServers:[...a.mcpServers,...d]})),await b().saveSettings(),!0}catch(a){return console.error("Failed to import MCP servers:",a),!1}}}),{name:r,partialize:a=>({llmProviders:a.llmProviders,mcpServers:a.mcpServers,preferences:a.preferences}),onRehydrateStorage:()=>a=>{a&&(Array.isArray(a.llmProviders)||(a.llmProviders=[]),Array.isArray(a.mcpServers)||(a.mcpServers=[]),a.preferences||(a.preferences=p.preferences))}})),v=a=>{try{let b=JSON.parse(a);if(b.mcpServers&&"object"==typeof b.mcpServers)return Object.entries(b.mcpServers).map(([a,b])=>({id:q(),name:a,command:b.command||"",args:Array.isArray(b.args)?b.args:[],env:b.env||{},enabled:!1!==b.enabled,status:"disconnected"}));if(Array.isArray(b))return b.map(a=>({id:q(),name:a.name||"",command:a.command||"",args:Array.isArray(a.args)?a.args:[],env:a.env||{},enabled:!1!==a.enabled,status:"disconnected"}));return[]}catch(a){return console.error("Failed to parse MCP servers JSON:",a),[]}},w=null,x=a=>{let b=document.documentElement;if(w&&(window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",w),w=null),"dark"===a)b.classList.add("dark"),console.log("\uD83C\uDF19 Applied dark theme");else if("light"===a)b.classList.remove("dark"),console.log("☀️ Applied light theme");else{let a=()=>{window.matchMedia("(prefers-color-scheme: dark)").matches?(b.classList.add("dark"),console.log("\uD83C\uDF19 Applied system dark theme")):(b.classList.remove("dark"),console.log("☀️ Applied system light theme"))};a();let c=window.matchMedia("(prefers-color-scheme: dark)");w=()=>a(),c.addEventListener("change",w)}},y=async a=>{try{let{default:b}=await c.e(266).then(c.bind(c,66266));await b.changeLanguage(a),localStorage.setItem("i18nextLng",a)}catch(a){console.warn("Failed to update i18n language:",a)}};var z=c(45129);let A=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),B=a=>{let b=a.find(a=>"user"===a.role);if(!b)return"New Chat";let c=b.content.trim();return c.length<=50?c:c.substring(0,47)+"..."};l()(o((a,b)=>({currentSession:null,messages:[],isLoading:!1,pendingToolCall:null,sessions:[],isLoadingSessions:!1,error:null,sendMessage:async c=>{console.log("\uD83D\uDE80 sendMessage called with:",c);let{currentSession:d,addMessage:e,saveSession:f}=b();if(!d)throw console.error("❌ No active session"),Error("No active session");console.log("\uD83D\uDCDD Current session:",d);let g={role:"user",content:c.trim()};console.log("➕ Adding user message:",g),e(g),a({isLoading:!0,error:null});try{console.log("\uD83D\uDD27 Getting settings...");let c=u.getState();console.log("⚙️ Settings store:",c);let g=c.llmProviders.find(a=>a.name===d.provider&&a.enabled);if(console.log("\uD83D\uDD0D Found provider:",g),!g)throw console.error("❌ No valid provider found"),Error(`No valid ${d.provider} provider configuration found. Please check your settings.`);let h={messages:b().messages,sessionId:d.id,provider:d.provider,model:d.model,baseUrl:g.baseUrl};console.log("\uD83D\uDCE4 Sending chat request:",{...h});let i=await z.Pt.sendMessage(h);if(i.error)throw Error(i.error);if(i.toolCalls&&i.toolCalls.length>0){let b={role:"assistant",content:i.reply||"I need to use a tool to help with your request.",toolCalls:i.toolCalls};e(b),a({pendingToolCall:i.toolCalls[0]})}else if(i.reply){let a={role:"assistant",content:i.reply};e(a)}f()}catch(c){console.error("Error sending message:",c);let b=c instanceof Error?c.message:"Unknown error occurred";throw a({error:b}),e({role:"assistant",content:`I encountered an error: ${b}. Please try again or check your settings.`}),f(),c}finally{a({isLoading:!1})}},confirmToolCall:async c=>{let{currentSession:d,addMessage:e,saveSession:f}=b();if(!d)throw Error("No active session");a({isLoading:!0,pendingToolCall:null,error:null});try{let a={toolCall:c,sessionId:d.id,messages:b().messages},g=await z.Pt.runTool(a);if(g.error)throw Error(g.error);let h={role:"tool",content:g.result,toolCallId:c.id};if(e(h),g.reply){let a={role:"assistant",content:g.reply};e(a)}f()}catch(c){console.error("Error executing tool:",c);let b=c instanceof Error?c.message:"Unknown error occurred";throw a({error:b}),e({role:"assistant",content:`Tool execution failed: ${b}. Please try again.`}),f(),c}finally{a({isLoading:!1})}},cancelToolCall:()=>{let{currentSession:c,addMessage:d,saveSession:e}=b();c&&(a({pendingToolCall:null}),d({role:"assistant",content:"Tool execution was cancelled by the user."}),e())},loadSession:async c=>{let{sessions:d}=b(),e=d.find(a=>a.id===c);if(!e)try{e=await z.Pt.getSession(c),a(a=>({sessions:[e,...a.sessions.filter(a=>a.id!==c)]}))}catch(a){throw console.error("Failed to load session from backend:",a),Error(`Session ${c} not found`)}a({currentSession:e,messages:e.messages,pendingToolCall:null,isLoading:!1})},createNewSession:(c,d,e=[])=>{let f={id:A(),title:"New Chat",messages:[],createdAt:new Date,updatedAt:new Date,provider:c,model:d,mcpServers:e};a(a=>({currentSession:f,messages:[],sessions:[f,...a.sessions],pendingToolCall:null,isLoading:!1})),b().saveSession()},updateSessionTitle:(c,d)=>{a(a=>({sessions:a.sessions.map(a=>a.id===c?{...a,title:d,updatedAt:new Date}:a),currentSession:a.currentSession?.id===c?{...a.currentSession,title:d,updatedAt:new Date}:a.currentSession})),b().saveSession()},deleteSession:c=>{a(a=>{let b=a.sessions.filter(a=>a.id!==c),d=a.currentSession?.id===c?null:a.currentSession;return{sessions:b,currentSession:d,messages:d?.messages||[]}}),b().saveSession()},archiveSession:a=>{b().deleteSession(a)},searchSessions:a=>{let{sessions:c}=b();if(!Array.isArray(c))return[];if(!a.trim())return c;let d=a.toLowerCase();return c.filter(a=>!!a.title.toLowerCase().includes(d)||a.messages.some(a=>a.content.toLowerCase().includes(d)))},addMessage:c=>{let d={...c,id:A(),timestamp:new Date};a(a=>{let b=[...a.messages,d],c=a.currentSession?{...a.currentSession,messages:b,updatedAt:new Date,title:"New Chat"===a.currentSession.title&&"user"===d.role?B([d]):a.currentSession.title}:null,e=a.sessions.map(a=>a.id===c?.id?c:a);return{messages:b,currentSession:c,sessions:e}});let{currentSession:e}=b();e&&"New Chat"===e.title&&"assistant"===d.role&&e.messages.length>=2&&z.Pt.generateSessionTitle(e.id).then(a=>{b().updateSessionTitle(e.id,a.title)}).catch(a=>{console.warn("Failed to generate session title:",a)})},updateMessage:(c,d)=>{a(a=>{let b=a.messages.map(a=>a.id===c?{...a,...d}:a),e=a.currentSession?{...a.currentSession,messages:b,updatedAt:new Date}:null,f=a.sessions.map(a=>a.id===e?.id?e:a);return{messages:b,currentSession:e,sessions:f}}),b().saveSession()},deleteMessage:c=>{a(a=>{let b=a.messages.filter(a=>a.id!==c),d=a.currentSession?{...a.currentSession,messages:b,updatedAt:new Date}:null,e=a.sessions.map(a=>a.id===d?.id?d:a);return{messages:b,currentSession:d,sessions:e}}),b().saveSession()},saveSession:()=>{},loadSessions:async()=>{a({isLoadingSessions:!0,error:null});try{let b=await z.Pt.getChatHistory();if(!b||!Array.isArray(b.sessions))throw Error("Invalid response format from server");let c=b.sessions.map(a=>({id:a.id,title:a.title,messages:[],createdAt:a.createdAt?new Date(a.createdAt):new Date,updatedAt:a.updatedAt?new Date(a.updatedAt):new Date,provider:a.provider,model:a.model,mcpServers:[]}));a(a=>{let b=Array.isArray(a.sessions)?a.sessions:[],d=[...c];return b.forEach(a=>{c.find(b=>b.id===a.id)||d.push(a)}),d.sort((a,b)=>{let c=a.updatedAt instanceof Date?a.updatedAt.getTime():0;return(b.updatedAt instanceof Date?b.updatedAt.getTime():0)-c}),{sessions:d,isLoadingSessions:!1}})}catch(b){console.error("Failed to load sessions from backend:",b),a(a=>({isLoadingSessions:!1,error:"Failed to load chat history from server",sessions:Array.isArray(a.sessions)?a.sessions:[]}))}},initializeStore:async()=>{await b().loadSessions()},setPendingToolCall:b=>{a({pendingToolCall:b})},setLoading:b=>{a({isLoading:b})},setError:b=>{a({error:b})},generateSessionTitle:a=>B(a),clearCurrentSession:()=>{a({currentSession:null,messages:[],pendingToolCall:null,isLoading:!1})}}),{name:"chat-store",storage:m(()=>localStorage),partialize:a=>({sessions:Array.isArray(a.sessions)?a.sessions:[],currentSession:a.currentSession,messages:a.messages||[]}),onRehydrateStorage:()=>a=>{a&&(Array.isArray(a.sessions)||(a.sessions=[]),Array.isArray(a.messages)||(a.messages=[]),a.isLoading=!1,a.pendingToolCall=null,a.error=null)}})),l(a=>({isLoading:!1,setLoading:b=>a({isLoading:b})}));let C=["en","zh"],D={en:"English",zh:"中文"},E=({className:a=""})=>{let{t:b}=(0,i.Bd)(),c=(0,h.useRouter)(),{theme:f,changeTheme:g}=(()=>{let[a,b]=(0,e.useState)("system"),[c,d]=(0,e.useState)("light");return(0,e.useEffect)(()=>{let a=localStorage.getItem("mcp-chat-ui-theme");a&&["light","dark","system"].includes(a)?b(a):b("system")},[]),(0,e.useEffect)(()=>{let b=()=>{let b,c=document.documentElement;"dark"===(b="system"===a?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":a)?c.classList.add("dark"):c.classList.remove("dark"),d(b)};if(b(),"system"===a){let a=window.matchMedia("(prefers-color-scheme: dark)"),c=()=>b();return a.addEventListener("change",c),()=>a.removeEventListener("change",c)}},[a]),{theme:a,resolvedTheme:c,changeTheme:a=>{b(a),localStorage.setItem("mcp-chat-ui-theme",a)},isDark:"dark"===c,isLight:"light"===c}})(),{currentLanguage:j,changeLanguage:k,supportedLanguages:l,getLanguageName:m}=(()=>{let{i18n:a}=(0,i.Bd)(),{preferences:b,changeLanguage:c}=u(),d=b.language,f=(0,e.useCallback)(async b=>{try{await a.changeLanguage(b),c(b)}catch(a){console.error("Failed to change language:",a)}},[a,c]);return{currentLanguage:d,changeLanguage:f,isLanguageSupported:(0,e.useCallback)(a=>C.includes(a),[]),getLanguageName:(0,e.useCallback)(a=>D[a],[]),supportedLanguages:C,languageNames:D}})(),{userPreferences:n,updatePreferences:o}=(()=>{let{preferences:a,updatePreferences:b}=u(),c=a.accessibility||{highContrast:!1,reducedMotion:!1,screenReaderAnnouncements:!0,keyboardNavigation:!0,focusVisible:!0,largeText:!1},[d,f]=(0,e.useState)({reducedMotion:window.matchMedia("(prefers-reduced-motion: reduce)").matches,highContrast:window.matchMedia("(prefers-contrast: high)").matches});(0,e.useEffect)(()=>{let a=window.matchMedia("(prefers-reduced-motion: reduce)"),b=window.matchMedia("(prefers-contrast: high)"),c=a=>{f(b=>({...b,reducedMotion:a.matches}))},d=a=>{f(b=>({...b,highContrast:a.matches}))};return a.addEventListener("change",c),b.addEventListener("change",d),()=>{a.removeEventListener("change",c),b.removeEventListener("change",d)}},[]);let g=(0,e.useCallback)(a=>{b({accessibility:{...c,...a}})},[c,b]),h=(0,e.useCallback)((a,b="polite")=>{c.screenReaderAnnouncements&&((a,b="polite")=>{let c=document.createElement("div");c.setAttribute("aria-live",b),c.setAttribute("aria-atomic","true"),c.className="sr-only",c.textContent=a,document.body.appendChild(c),setTimeout(()=>{document.body.removeChild(c)},1e3)})(a,b)},[c.screenReaderAnnouncements]),i={highContrast:c.highContrast||d.highContrast,reducedMotion:c.reducedMotion||d.reducedMotion,screenReaderAnnouncements:c.screenReaderAnnouncements,keyboardNavigation:c.keyboardNavigation,focusVisible:c.focusVisible,largeText:c.largeText},j=((a=!1)=>{let b="focus:outline-none focus:ring-2 focus:ring-offset-2";return a?`${b} focus:ring-black dark:focus:ring-white focus:ring-offset-white dark:focus:ring-offset-black`:`${b} focus:ring-blue-500 focus:ring-offset-white dark:focus:ring-offset-gray-800`})(i.highContrast);return(0,e.useEffect)(()=>{let a=document.documentElement;i.highContrast?a.classList.add("high-contrast"):a.classList.remove("high-contrast"),i.reducedMotion?a.classList.add("reduce-motion"):a.classList.remove("reduce-motion"),i.largeText?a.classList.add("large-text"):a.classList.remove("large-text"),i.focusVisible?a.classList.add("focus-visible"):a.classList.remove("focus-visible")},[i]),{preferences:i,userPreferences:c,systemPreferences:d,updatePreferences:g,announce:h,focusRingClasses:j}})(),{preferences:p,updatePreferences:q}=u(),[r,s]=(0,e.useState)(!1),t=async a=>{if(a!==j){s(!0);try{await k(a),q({language:a}),await c.push(c.asPath,c.asPath,{locale:a})}catch(a){console.error("Failed to change language:",a)}finally{s(!1)}}},v=(a,b)=>{q({[a]:b})},w=(a,b)=>{o({[a]:b})},x=({id:a,label:b,description:c,checked:e,onChange:f,disabled:g=!1})=>(0,d.jsxs)("div",{className:"flex items-center justify-between py-3",children:[(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("label",{htmlFor:a,className:"text-sm font-medium text-gray-700 dark:text-gray-300 cursor-pointer",children:b}),(0,d.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:c})]}),(0,d.jsxs)("button",{id:a,type:"button",role:"switch","aria-checked":e,"aria-describedby":`${a}-description`,onClick:()=>f(!e),disabled:g,className:`
          relative inline-flex h-6 w-11 items-center rounded-full transition-colors
          focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
          disabled:opacity-50 disabled:cursor-not-allowed
          ${e?"bg-blue-600":"bg-gray-200 dark:bg-gray-700"}
        `,children:[(0,d.jsx)("span",{className:"sr-only",children:b}),(0,d.jsx)("span",{className:`
            inline-block h-4 w-4 transform rounded-full bg-white transition-transform
            ${e?"translate-x-6":"translate-x-1"}
          `})]}),(0,d.jsx)("div",{id:`${a}-description`,className:"sr-only",children:c})]}),y=({id:a,label:b,description:c,value:e,options:f,onChange:g,disabled:h=!1})=>(0,d.jsxs)("div",{className:"py-3",children:[(0,d.jsx)("label",{htmlFor:a,className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:b}),(0,d.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:c}),(0,d.jsx)("select",{id:a,value:e,onChange:a=>g(a.target.value),disabled:h,className:" block w-full px-3 py-2 border border-gray-300 dark:border-gray-600  rounded-md shadow-sm bg-white dark:bg-gray-800  text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed ",children:f.map(a=>(0,d.jsx)("option",{value:a.value,children:a.label},a.value))})]});return(0,d.jsxs)("div",{className:`space-y-6 ${a}`,children:[(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[(0,d.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4",children:b("settings.general","General")}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)(y,{id:"language-select",label:b("settings.language","Language"),description:b("settings.languageDescription","Choose your preferred language for the interface"),value:j,options:l.map(a=>({value:a,label:m(a)})),onChange:t,disabled:r}),(0,d.jsx)(y,{id:"theme-select",label:b("settings.theme","Theme"),description:b("settings.themeDescription","Choose your preferred color theme"),value:f,options:[{value:"light",label:b("themes.light","Light")},{value:"dark",label:b("themes.dark","Dark")},{value:"system",label:b("themes.system","System")}],onChange:a=>(a=>{g(a),q({theme:a})})(a)})]})]}),(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[(0,d.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4",children:b("settings.preferences","Preferences")}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(x,{id:"auto-scroll",label:b("settings.autoScroll","Auto-scroll"),description:b("settings.autoScrollDescription","Automatically scroll to new messages"),checked:p.autoScroll,onChange:a=>v("autoScroll",a)}),(0,d.jsx)(x,{id:"sound-enabled",label:b("settings.soundEnabled","Sound notifications"),description:b("settings.soundEnabledDescription","Play sounds for notifications"),checked:p.soundEnabled,onChange:a=>v("soundEnabled",a)})]})]}),(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[(0,d.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4",children:b("accessibility.title","Accessibility")}),(0,d.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:b("accessibility.description","Configure accessibility features to improve your experience")}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(x,{id:"high-contrast",label:b("accessibility.highContrast","High Contrast Mode"),description:b("accessibility.highContrastDescription","Increase contrast for better visibility"),checked:n.highContrast,onChange:a=>w("highContrast",a)}),(0,d.jsx)(x,{id:"large-text",label:b("accessibility.largeText","Large Text"),description:b("accessibility.largeTextDescription","Increase text size throughout the interface"),checked:n.largeText,onChange:a=>w("largeText",a)}),(0,d.jsx)(x,{id:"reduced-motion",label:b("accessibility.reducedMotion","Reduce Motion"),description:b("accessibility.reducedMotionDescription","Minimize animations and transitions"),checked:n.reducedMotion,onChange:a=>w("reducedMotion",a)}),(0,d.jsx)(x,{id:"focus-visible",label:b("accessibility.focusVisible","Enhanced Focus Indicators"),description:b("accessibility.focusVisibleDescription","Show clear focus indicators for keyboard navigation"),checked:n.focusVisible,onChange:a=>w("focusVisible",a)}),(0,d.jsx)(x,{id:"keyboard-navigation",label:b("accessibility.keyboardNavigation","Enhanced Keyboard Navigation"),description:b("accessibility.keyboardNavigationDescription","Improve keyboard navigation with arrow keys and shortcuts"),checked:n.keyboardNavigation,onChange:a=>w("keyboardNavigation",a)}),(0,d.jsx)(x,{id:"screen-reader-announcements",label:b("accessibility.screenReaderAnnouncements","Screen Reader Announcements"),description:b("accessibility.screenReaderAnnouncementsDescription","Announce important changes and updates to screen readers"),checked:n.screenReaderAnnouncements,onChange:a=>w("screenReaderAnnouncements",a)})]})]}),(0,d.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:(0,d.jsxs)("div",{className:"flex items-start",children:[(0,d.jsx)("svg",{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,d.jsxs)("div",{className:"ml-3",children:[(0,d.jsx)("h4",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:b("accessibility.wcagCompliance","WCAG 2.1 AA Compliance")}),(0,d.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:b("accessibility.wcagDescription","This application follows Web Content Accessibility Guidelines (WCAG) 2.1 AA standards to ensure accessibility for all users.")})]})]})})]})};function F({language:a,serverSettings:b}){let[c,h]=(0,e.useState)("llm"),i="zh"===a?{settings:"设置",backToChat:"← 返回聊天",history:"历史记录",llmProviders:"LLM 提供商",mcpServers:"MCP 服务器",preferences:"偏好设置",security:"安全",dataExport:"数据导出",providerConfiguration:"LLM 提供商配置",providerStatus:"提供商状态",connected:"已连接",pending:"待配置",error:"错误",providerManagement:"提供商管理",addProvider:"添加提供商",note:"注意",singleUserNote:"这是单用户部署。API密钥在服务器端管理，从不暴露给客户端。",sessionNote:"创建新聊天会话时，您将从此处配置的提供商中选择。所有凭据都安全存储在服务器上。"}:{settings:"Settings",backToChat:"← Back to Chat",history:"History",llmProviders:"LLM Providers",mcpServers:"MCP Servers",preferences:"Preferences",security:"Security",dataExport:"Data Export",providerConfiguration:"LLM Provider Configuration",providerStatus:"Provider Status",connected:"Connected",pending:"Pending",error:"Error",providerManagement:"Provider Management",addProvider:"Add Provider",note:"Note",singleUserNote:"This is a single-user deployment. API keys are managed server-side and never exposed to the client.",sessionNote:"When creating new chat sessions, you'll select from providers configured here. All credentials remain securely stored on the server."};return(0,d.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,d.jsxs)("div",{className:"grid md:grid-cols-4 gap-8",children:[(0,d.jsx)("div",{className:"md:col-span-1",children:(0,d.jsxs)("nav",{className:"space-y-2",children:[(0,d.jsx)("button",{onClick:()=>h("llm"),className:`w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors ${"llm"===c?"bg-primary/10 text-primary":"text-muted-foreground hover:text-foreground hover:bg-accent"}`,children:i.llmProviders}),(0,d.jsx)("button",{onClick:()=>h("mcp"),className:`w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors ${"mcp"===c?"bg-primary/10 text-primary":"text-muted-foreground hover:text-foreground hover:bg-accent"}`,children:i.mcpServers}),(0,d.jsx)("button",{onClick:()=>h("preferences"),className:`w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors ${"preferences"===c?"bg-primary/10 text-primary":"text-muted-foreground hover:text-foreground hover:bg-accent"}`,children:i.preferences}),(0,d.jsx)("button",{onClick:()=>h("security"),className:`w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors ${"security"===c?"bg-primary/10 text-primary":"text-muted-foreground hover:text-foreground hover:bg-accent"}`,children:i.security}),(0,d.jsx)("button",{onClick:()=>h("export"),className:`w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors ${"export"===c?"bg-primary/10 text-primary":"text-muted-foreground hover:text-foreground hover:bg-accent"}`,children:i.dataExport})]})}),(0,d.jsx)("div",{className:"md:col-span-3",children:(0,d.jsx)("div",{className:"bg-card border rounded-lg p-6",children:(()=>{switch(c){case"llm":return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-lg font-medium mb-4",children:i.providerStatus}),(0,d.jsx)("div",{className:"space-y-3",children:b.llmProviders.map(b=>{let c="connected"===b.status?"bg-green-500":"error"===b.status?"bg-red-500":"bg-yellow-500",e="connected"===b.status?i.connected:"error"===b.status?i.error:i.pending,f="connected"===b.status?"text-green-600":"error"===b.status?"text-red-600":"text-yellow-600";return(0,d.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("div",{className:`w-3 h-3 rounded-full ${c}`}),(0,d.jsx)("span",{className:"font-medium",children:b.displayName}),(0,d.jsx)("span",{className:"text-sm text-muted-foreground",children:b.models.length>0?b.models.map(a=>a.displayName).join(", "):"zh"===a?"未配置":"Not configured"})]}),(0,d.jsx)("span",{className:`text-sm ${f}`,children:e})]},b.id)})})]}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("h3",{className:"text-lg font-medium",children:i.providerManagement}),(0,d.jsx)("button",{className:"inline-flex items-center justify-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90 transition-colors",children:i.addProvider})]}),(0,d.jsxs)("div",{className:"text-sm text-muted-foreground bg-muted/30 p-4 rounded-lg",children:[(0,d.jsxs)("p",{className:"mb-2",children:[(0,d.jsxs)("strong",{children:[i.note,":"]})," ",i.singleUserNote]}),(0,d.jsx)("p",{children:i.sessionNote})]})]}),(0,d.jsx)(f,{language:a})]});case"mcp":return(0,d.jsxs)("div",{className:"space-y-6",children:[b.mcpServers.length>0&&(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-lg font-medium mb-4",children:i.mcpServers}),(0,d.jsx)("div",{className:"space-y-3",children:b.mcpServers.map(b=>{let c="connected"===b.status?"bg-green-500":"error"===b.status?"bg-red-500":"bg-yellow-500",e="connected"===b.status?i.connected:"error"===b.status?i.error:i.pending,f="connected"===b.status?"text-green-600":"error"===b.status?"text-red-600":"text-yellow-600";return(0,d.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("div",{className:`w-3 h-3 rounded-full ${c}`}),(0,d.jsx)("span",{className:"font-medium",children:b.displayName}),(0,d.jsx)("span",{className:"text-sm text-muted-foreground",children:b.toolCount>0?`${b.toolCount} ${"zh"===a?"个工具":"tools"}`:"zh"===a?"无工具":"No tools"})]}),(0,d.jsx)("span",{className:`text-sm ${f}`,children:e})]},b.id)})})]}),(0,d.jsx)(g,{language:a})]});case"preferences":return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsx)("h3",{className:"text-lg font-medium",children:i.preferences}),(0,d.jsx)(E,{})]});case"security":return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsx)("h3",{className:"text-lg font-medium",children:i.security}),(0,d.jsx)("p",{className:"text-muted-foreground",children:"Security settings coming soon..."})]});case"export":return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsx)("h3",{className:"text-lg font-medium",children:i.dataExport}),(0,d.jsx)("p",{className:"text-muted-foreground",children:"Data export options coming soon..."})]});default:return null}})()})})]})})}},1708:a=>{"use strict";a.exports=require("node:process")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6584:(a,b)=>{"use strict";function c(){let a=Object.create(null);return{on(b,c){(a[b]||(a[b]=[])).push(c)},off(b,c){a[b]&&a[b].splice(a[b].indexOf(c)>>>0,1)},emit(b){for(var c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];(a[b]||[]).slice().map(a=>{a(...d)})}}}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"default",{enumerable:!0,get:function(){return c}})},7448:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"setAttributesFromProps",{enumerable:!0,get:function(){return f}});let c={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv",noModule:"noModule"},d=["onLoad","onReady","dangerouslySetInnerHTML","children","onError","strategy","stylesheets"];function e(a){return["async","defer","noModule"].includes(a)}function f(a,b){for(let[f,g]of Object.entries(b)){if(!b.hasOwnProperty(f)||d.includes(f)||void 0===g)continue;let h=c[f]||f.toLowerCase();"SCRIPT"===a.tagName&&e(h)?a[h]=!!g:a.setAttribute(h,String(g)),(!1===g||"SCRIPT"===a.tagName&&e(h)&&(!g||"false"===g))&&(a.setAttribute(h,""),a.removeAttribute(h))}}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12352:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"getRouteMatcher",{enumerable:!0,get:function(){return e}});let d=c(79289);function e(a){let{re:b,groups:c}=a;return a=>{let e=b.exec(a);if(!e)return!1;let f=a=>{try{return decodeURIComponent(a)}catch(a){throw Object.defineProperty(new d.DecodeError("failed to decode param"),"__NEXT_ERROR_CODE",{value:"E528",enumerable:!1,configurable:!0})}},g={};for(let[a,b]of Object.entries(c)){let c=e[b.pos];void 0!==c&&(b.repeat?g[a]=c.split("/").map(a=>f(a)):g[a]=f(c))}return g}}},13985:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{ACTION_SUFFIX:function(){return l},APP_DIR_ALIAS:function(){return F},CACHE_ONE_YEAR:function(){return x},DOT_NEXT_ALIAS:function(){return D},ESLINT_DEFAULT_DIRS:function(){return Z},GSP_NO_RETURNED_VALUE:function(){return T},GSSP_COMPONENT_MEMBER_ERROR:function(){return W},GSSP_NO_RETURNED_VALUE:function(){return U},INFINITE_CACHE:function(){return y},INSTRUMENTATION_HOOK_FILENAME:function(){return B},MATCHED_PATH_HEADER:function(){return e},MIDDLEWARE_FILENAME:function(){return z},MIDDLEWARE_LOCATION_REGEXP:function(){return A},NEXT_BODY_SUFFIX:function(){return o},NEXT_CACHE_IMPLICIT_TAG_ID:function(){return w},NEXT_CACHE_REVALIDATED_TAGS_HEADER:function(){return q},NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER:function(){return r},NEXT_CACHE_SOFT_TAG_MAX_LENGTH:function(){return v},NEXT_CACHE_TAGS_HEADER:function(){return p},NEXT_CACHE_TAG_MAX_ITEMS:function(){return t},NEXT_CACHE_TAG_MAX_LENGTH:function(){return u},NEXT_DATA_SUFFIX:function(){return m},NEXT_INTERCEPTION_MARKER_PREFIX:function(){return d},NEXT_META_SUFFIX:function(){return n},NEXT_QUERY_PARAM_PREFIX:function(){return c},NEXT_RESUME_HEADER:function(){return s},NON_STANDARD_NODE_ENV:function(){return X},PAGES_DIR_ALIAS:function(){return C},PRERENDER_REVALIDATE_HEADER:function(){return f},PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER:function(){return g},PUBLIC_DIR_MIDDLEWARE_CONFLICT:function(){return N},ROOT_DIR_ALIAS:function(){return E},RSC_ACTION_CLIENT_WRAPPER_ALIAS:function(){return M},RSC_ACTION_ENCRYPTION_ALIAS:function(){return L},RSC_ACTION_PROXY_ALIAS:function(){return I},RSC_ACTION_VALIDATE_ALIAS:function(){return H},RSC_CACHE_WRAPPER_ALIAS:function(){return J},RSC_DYNAMIC_IMPORT_WRAPPER_ALIAS:function(){return K},RSC_MOD_REF_PROXY_ALIAS:function(){return G},RSC_PREFETCH_SUFFIX:function(){return h},RSC_SEGMENTS_DIR_SUFFIX:function(){return i},RSC_SEGMENT_SUFFIX:function(){return j},RSC_SUFFIX:function(){return k},SERVER_PROPS_EXPORT_ERROR:function(){return S},SERVER_PROPS_GET_INIT_PROPS_CONFLICT:function(){return P},SERVER_PROPS_SSG_CONFLICT:function(){return Q},SERVER_RUNTIME:function(){return $},SSG_FALLBACK_EXPORT_ERROR:function(){return Y},SSG_GET_INITIAL_PROPS_CONFLICT:function(){return O},STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR:function(){return R},UNSTABLE_REVALIDATE_RENAME_ERROR:function(){return V},WEBPACK_LAYERS:function(){return aa},WEBPACK_RESOURCE_QUERIES:function(){return ab}});let c="nxtP",d="nxtI",e="x-matched-path",f="x-prerender-revalidate",g="x-prerender-revalidate-if-generated",h=".prefetch.rsc",i=".segments",j=".segment.rsc",k=".rsc",l=".action",m=".json",n=".meta",o=".body",p="x-next-cache-tags",q="x-next-revalidated-tags",r="x-next-revalidate-tag-token",s="next-resume",t=128,u=256,v=1024,w="_N_T_",x=31536e3,y=0xfffffffe,z="middleware",A=`(?:src/)?${z}`,B="instrumentation",C="private-next-pages",D="private-dot-next",E="private-next-root-dir",F="private-next-app-dir",G="private-next-rsc-mod-ref-proxy",H="private-next-rsc-action-validate",I="private-next-rsc-server-reference",J="private-next-rsc-cache-wrapper",K="private-next-rsc-track-dynamic-import",L="private-next-rsc-action-encryption",M="private-next-rsc-action-client-wrapper",N="You can not have a '_next' folder inside of your public folder. This conflicts with the internal '/_next' route. https://nextjs.org/docs/messages/public-next-folder-conflict",O="You can not use getInitialProps with getStaticProps. To use SSG, please remove your getInitialProps",P="You can not use getInitialProps with getServerSideProps. Please remove getInitialProps.",Q="You can not use getStaticProps or getStaticPaths with getServerSideProps. To use SSG, please remove getServerSideProps",R="can not have getInitialProps/getServerSideProps, https://nextjs.org/docs/messages/404-get-initial-props",S="pages with `getServerSideProps` can not be exported. See more info here: https://nextjs.org/docs/messages/gssp-export",T="Your `getStaticProps` function did not return an object. Did you forget to add a `return`?",U="Your `getServerSideProps` function did not return an object. Did you forget to add a `return`?",V="The `unstable_revalidate` property is available for general use.\nPlease use `revalidate` instead.",W="can not be attached to a page's component and must be exported from the page. See more info here: https://nextjs.org/docs/messages/gssp-component-member",X='You are using a non-standard "NODE_ENV" value in your environment. This creates inconsistencies in the project and is strongly advised against. Read more: https://nextjs.org/docs/messages/non-standard-node-env',Y="Pages with `fallback` enabled in `getStaticPaths` can not be exported. See more info here: https://nextjs.org/docs/messages/ssg-fallback-true-export",Z=["app","pages","components","lib","src"],$={edge:"edge",experimentalEdge:"experimental-edge",nodejs:"nodejs"},_={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",apiNode:"api-node",apiEdge:"api-edge",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",pagesDirBrowser:"pages-dir-browser",pagesDirEdge:"pages-dir-edge",pagesDirNode:"pages-dir-node"},aa={..._,GROUP:{builtinReact:[_.reactServerComponents,_.actionBrowser],serverOnly:[_.reactServerComponents,_.actionBrowser,_.instrument,_.middleware],neutralTarget:[_.apiNode,_.apiEdge],clientOnly:[_.serverSideRendering,_.appPagesBrowser],bundled:[_.reactServerComponents,_.actionBrowser,_.serverSideRendering,_.appPagesBrowser,_.shared,_.instrument,_.middleware],appPages:[_.reactServerComponents,_.serverSideRendering,_.appPagesBrowser,_.actionBrowser]}},ab={edgeSSREntry:"__next_edge_ssr_entry__",metadata:"__next_metadata__",metadataRoute:"__next_metadata_route__",metadataImageMeta:"__next_metadata_image_meta__"}},14104:(a,b)=>{"use strict";function c(a){return a.replace(/\\/g,"/")}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"normalizePathSep",{enumerable:!0,get:function(){return c}})},16118:(a,b,c)=>{Promise.resolve().then(c.bind(c,69407)),Promise.resolve().then(c.bind(c,28430)),Promise.resolve().then(c.bind(c,7685)),Promise.resolve().then(c.bind(c,97804)),Promise.resolve().then(c.bind(c,80920))},16457:(a,b,c)=>{"use strict";let d;c.d(b,{r9:()=>p,Bd:()=>t});var e=c(43210);c(72954),Object.create(null);let f={},g=(a,b,c,d)=>{k(c)&&f[c]||(k(c)&&(f[c]=new Date),((a,b,c,d)=>{let e=[c,{code:b,...d||{}}];if(a?.services?.logger?.forward)return a.services.logger.forward(e,"warn","react-i18next::",!0);k(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),a?.services?.logger?.warn?a.services.logger.warn(...e):console?.warn&&console.warn(...e)})(a,b,c,d))},h=(a,b)=>()=>{if(a.isInitialized)b();else{let c=()=>{setTimeout(()=>{a.off("initialized",c)},0),b()};a.on("initialized",c)}},i=(a,b,c)=>{a.loadNamespaces(b,h(a,c))},j=(a,b,c,d)=>{if(k(c)&&(c=[c]),a.options.preload&&a.options.preload.indexOf(b)>-1)return i(a,c,d);c.forEach(b=>{0>a.options.ns.indexOf(b)&&a.options.ns.push(b)}),a.loadLanguages(b,h(a,d))},k=a=>"string"==typeof a,l=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,m={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"\xa9","&#169;":"\xa9","&reg;":"\xae","&#174;":"\xae","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},n=a=>m[a],o={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:a=>a.replace(l,n)},p={type:"3rdParty",init(a){((a={})=>{o={...o,...a}})(a.options.react),d=a}},q=(0,e.createContext)();class r{constructor(){this.usedNamespaces={}}addUsedNamespaces(a){a.forEach(a=>{this.usedNamespaces[a]||(this.usedNamespaces[a]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}let s=(a,b,c,d)=>a.getFixedT(b,c,d),t=(a,b={})=>{let{i18n:c}=b,{i18n:f,defaultNS:h}=(0,e.useContext)(q)||{},l=c||f||d;if(l&&!l.reportNamespaces&&(l.reportNamespaces=new r),!l){g(l,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");let a=(a,b)=>k(b)?b:(a=>"object"==typeof a&&null!==a)(b)&&k(b.defaultValue)?b.defaultValue:Array.isArray(a)?a[a.length-1]:a,b=[a,{},!1];return b.t=a,b.i18n={},b.ready=!1,b}l.options.react?.wait&&g(l,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");let m={...o,...l.options.react,...b},{useSuspense:n,keyPrefix:p}=m,t=a||h||l.options?.defaultNS;t=k(t)?[t]:t||["translation"],l.reportNamespaces.addUsedNamespaces?.(t);let u=(l.isInitialized||l.initializedStoreOnce)&&t.every(a=>((a,b,c={})=>b.languages&&b.languages.length?b.hasLoadedNamespace(a,{lng:c.lng,precheck:(b,d)=>{if(c.bindI18n&&c.bindI18n.indexOf("languageChanging")>-1&&b.services.backendConnector.backend&&b.isLanguageChangingTo&&!d(b.isLanguageChangingTo,a))return!1}}):(g(b,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:b.languages}),!0))(a,l,m)),v=((a,b,c,d)=>(0,e.useCallback)(s(a,b,c,d),[a,b,c,d]))(l,b.lng||null,"fallback"===m.nsMode?t:t[0],p),w=()=>v,x=()=>s(l,b.lng||null,"fallback"===m.nsMode?t:t[0],p),[y,z]=(0,e.useState)(w),A=t.join();b.lng&&(A=`${b.lng}${A}`);let B=((a,b)=>{let c=(0,e.useRef)();return(0,e.useEffect)(()=>{c.current=b?c.current:a},[a,b]),c.current})(A),C=(0,e.useRef)(!0);(0,e.useEffect)(()=>{let{bindI18n:a,bindI18nStore:c}=m;C.current=!0,u||n||(b.lng?j(l,b.lng,t,()=>{C.current&&z(x)}):i(l,t,()=>{C.current&&z(x)})),u&&B&&B!==A&&C.current&&z(x);let d=()=>{C.current&&z(x)};return a&&l?.on(a,d),c&&l?.store.on(c,d),()=>{C.current=!1,l&&a&&a?.split(" ").forEach(a=>l.off(a,d)),c&&l&&c.split(" ").forEach(a=>l.store.off(a,d))}},[l,A]),(0,e.useEffect)(()=>{C.current&&u&&z(w)},[l,p,u]);let D=[y,l,u];if(D.t=y,D.i18n=l,D.ready=u,u||!u&&!n)return D;throw new Promise(a=>{b.lng?j(l,b.lng,t,()=>a()):i(l,t,()=>a())})}},16493:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"normalizeLocalePath",{enumerable:!0,get:function(){return d}});let c=new WeakMap;function d(a,b){let d;if(!b)return{pathname:a};let e=c.get(b);e||(e=b.map(a=>a.toLowerCase()),c.set(b,e));let f=a.split("/",2);if(!f[1])return{pathname:a};let g=f[1].toLowerCase(),h=e.indexOf(g);return h<0?{pathname:a}:(d=b[h],{pathname:a=a.slice(d.length+1)||"/",detectedLocale:d})}},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19307:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"addPathSuffix",{enumerable:!0,get:function(){return e}});let d=c(19169);function e(a,b){if(!a.startsWith("/")||!b)return a;let{pathname:c,query:e,hash:f}=(0,d.parsePath)(a);return""+c+b+e+f}},19587:(a,b)=>{"use strict";function c(a){return a.split("/").map(a=>encodeURIComponent(a)).join("/")}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"encodeURIPath",{enumerable:!0,get:function(){return c}})},23640:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"addLocale",{enumerable:!0,get:function(){return e}});let d=c(54674),e=function(a){for(var b=arguments.length,e=Array(b>1?b-1:0),f=1;f<b;f++)e[f-1]=arguments[f];return(0,d.normalizePathTrailingSlash)(c(98636).addLocale(a,...e))};("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},25117:(a,b)=>{"use strict";function c(a,b){let c={};return Object.keys(a).forEach(d=>{b.includes(d)||(c[d]=a[d])}),c}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"omit",{enumerable:!0,get:function(){return c}})},25779:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"detectDomainLocale",{enumerable:!0,get:function(){return d}});let d=function(){for(var a=arguments.length,b=Array(a),d=0;d<a;d++)b[d]=arguments[d];return c(99090).C(...b)};("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},26713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},27618:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"BloomFilter",{enumerable:!0,get:function(){return d}});class d{static from(a,b){void 0===b&&(b=1e-4);let c=new d(a.length,b);for(let b of a)c.add(b);return c}export(){let a={numItems:this.numItems,errorRate:this.errorRate,numBits:this.numBits,numHashes:this.numHashes,bitArray:this.bitArray};if(this.errorRate<1e-4){let b=JSON.stringify(a),d=c(76267).sync(b);d>1024&&console.warn("Creating filter with error rate less than 0.1% (0.001) can increase the size dramatically proceed with caution. Received error rate "+this.errorRate+" resulted in size "+b.length+" bytes, "+d+" bytes (gzip)")}return a}import(a){this.numItems=a.numItems,this.errorRate=a.errorRate,this.numBits=a.numBits,this.numHashes=a.numHashes,this.bitArray=a.bitArray}add(a){this.getHashValues(a).forEach(a=>{this.bitArray[a]=1})}contains(a){return this.getHashValues(a).every(a=>this.bitArray[a])}getHashValues(a){let b=[];for(let c=1;c<=this.numHashes;c++){let d=function(a){let b=0;for(let c=0;c<a.length;c++)b=Math.imul(b^a.charCodeAt(c),0x5bd1e995),b^=b>>>13,b=Math.imul(b,0x5bd1e995);return b>>>0}(""+a+c)%this.numBits;b.push(d)}return b}constructor(a,b=1e-4){this.numItems=a,this.errorRate=b,this.numBits=Math.ceil(-(a*Math.log(b))/(Math.log(2)*Math.log(2))),this.numHashes=Math.ceil(this.numBits/a*Math.log(2)),this.bitArray=Array(this.numBits).fill(0)}}},27910:a=>{"use strict";a.exports=require("stream")},28354:a=>{"use strict";a.exports=require("util")},29021:a=>{"use strict";a.exports=require("fs")},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32532:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"getNextPathnameInfo",{enumerable:!0,get:function(){return g}});let d=c(16493),e=c(50075),f=c(2255);function g(a,b){var c,g;let{basePath:h,i18n:i,trailingSlash:j}=null!=(c=b.nextConfig)?c:{},k={pathname:a,trailingSlash:"/"!==a?a.endsWith("/"):j};h&&(0,f.pathHasPrefix)(k.pathname,h)&&(k.pathname=(0,e.removePathPrefix)(k.pathname,h),k.basePath=h);let l=k.pathname;if(k.pathname.startsWith("/_next/data/")&&k.pathname.endsWith(".json")){let a=k.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/");k.buildId=a[0],l="index"!==a[1]?"/"+a.slice(1).join("/"):"/",!0===b.parseData&&(k.pathname=l)}if(i){let a=b.i18nProvider?b.i18nProvider.analyze(k.pathname):(0,d.normalizeLocalePath)(k.pathname,i.locales);k.locale=a.detectedLocale,k.pathname=null!=(g=a.pathname)?g:k.pathname,!a.detectedLocale&&k.buildId&&(a=b.i18nProvider?b.i18nProvider.analyze(l):(0,d.normalizeLocalePath)(l,i.locales)).detectedLocale&&(k.locale=a.detectedLocale)}return k}},33645:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{getNamedMiddlewareRegex:function(){return p},getNamedRouteRegex:function(){return o},getRouteRegex:function(){return l},parseParameter:function(){return i}});let d=c(13985),e=c(72859),f=c(70519),g=c(84949),h=/^([^[]*)\[((?:\[[^\]]*\])|[^\]]+)\](.*)$/;function i(a){let b=a.match(h);return b?j(b[2]):j(a)}function j(a){let b=a.startsWith("[")&&a.endsWith("]");b&&(a=a.slice(1,-1));let c=a.startsWith("...");return c&&(a=a.slice(3)),{key:a,repeat:c,optional:b}}function k(a,b,c){let d={},i=1,k=[];for(let l of(0,g.removeTrailingSlash)(a).slice(1).split("/")){let a=e.INTERCEPTION_ROUTE_MARKERS.find(a=>l.startsWith(a)),g=l.match(h);if(a&&g&&g[2]){let{key:b,optional:c,repeat:e}=j(g[2]);d[b]={pos:i++,repeat:e,optional:c},k.push("/"+(0,f.escapeStringRegexp)(a)+"([^/]+?)")}else if(g&&g[2]){let{key:a,repeat:b,optional:e}=j(g[2]);d[a]={pos:i++,repeat:b,optional:e},c&&g[1]&&k.push("/"+(0,f.escapeStringRegexp)(g[1]));let h=b?e?"(?:/(.+?))?":"/(.+?)":"/([^/]+?)";c&&g[1]&&(h=h.substring(1)),k.push(h)}else k.push("/"+(0,f.escapeStringRegexp)(l));b&&g&&g[3]&&k.push((0,f.escapeStringRegexp)(g[3]))}return{parameterizedRoute:k.join(""),groups:d}}function l(a,b){let{includeSuffix:c=!1,includePrefix:d=!1,excludeOptionalTrailingSlash:e=!1}=void 0===b?{}:b,{parameterizedRoute:f,groups:g}=k(a,c,d),h=f;return e||(h+="(?:/)?"),{re:RegExp("^"+h+"$"),groups:g}}function m(a){let b,{interceptionMarker:c,getSafeRouteKey:d,segment:e,routeKeys:g,keyPrefix:h,backreferenceDuplicateKeys:i}=a,{key:k,optional:l,repeat:m}=j(e),n=k.replace(/\W/g,"");h&&(n=""+h+n);let o=!1;(0===n.length||n.length>30)&&(o=!0),isNaN(parseInt(n.slice(0,1)))||(o=!0),o&&(n=d());let p=n in g;h?g[n]=""+h+k:g[n]=k;let q=c?(0,f.escapeStringRegexp)(c):"";return b=p&&i?"\\k<"+n+">":m?"(?<"+n+">.+?)":"(?<"+n+">[^/]+?)",l?"(?:/"+q+b+")?":"/"+q+b}function n(a,b,c,i,j){let k,l=(k=0,()=>{let a="",b=++k;for(;b>0;)a+=String.fromCharCode(97+(b-1)%26),b=Math.floor((b-1)/26);return a}),n={},o=[];for(let k of(0,g.removeTrailingSlash)(a).slice(1).split("/")){let a=e.INTERCEPTION_ROUTE_MARKERS.some(a=>k.startsWith(a)),g=k.match(h);if(a&&g&&g[2])o.push(m({getSafeRouteKey:l,interceptionMarker:g[1],segment:g[2],routeKeys:n,keyPrefix:b?d.NEXT_INTERCEPTION_MARKER_PREFIX:void 0,backreferenceDuplicateKeys:j}));else if(g&&g[2]){i&&g[1]&&o.push("/"+(0,f.escapeStringRegexp)(g[1]));let a=m({getSafeRouteKey:l,segment:g[2],routeKeys:n,keyPrefix:b?d.NEXT_QUERY_PARAM_PREFIX:void 0,backreferenceDuplicateKeys:j});i&&g[1]&&(a=a.substring(1)),o.push(a)}else o.push("/"+(0,f.escapeStringRegexp)(k));c&&g&&g[3]&&o.push((0,f.escapeStringRegexp)(g[3]))}return{namedParameterizedRoute:o.join(""),routeKeys:n}}function o(a,b){var c,d,e;let f=n(a,b.prefixRouteKeys,null!=(c=b.includeSuffix)&&c,null!=(d=b.includePrefix)&&d,null!=(e=b.backreferenceDuplicateKeys)&&e),g=f.namedParameterizedRoute;return b.excludeOptionalTrailingSlash||(g+="(?:/)?"),{...l(a,b),namedRegex:"^"+g+"$",routeKeys:f.routeKeys}}function p(a,b){let{parameterizedRoute:c}=k(a,!1,!1),{catchAll:d=!0}=b;if("/"===c)return{namedRegex:"^/"+(d?".*":"")+"$"};let{namedParameterizedRoute:e}=n(a,!1,!1,!1,!1);return{namedRegex:"^"+e+(d?"(?:(/.*)?)":"")+"$"}}},33873:a=>{"use strict";a.exports=require("path")},38848:(a,b)=>{"use strict";function c(a,b){let c=Object.keys(a);if(c.length!==Object.keys(b).length)return!1;for(let d=c.length;d--;){let e=c[d];if("query"===e){let c=Object.keys(a.query);if(c.length!==Object.keys(b.query).length)return!1;for(let d=c.length;d--;){let e=c[d];if(!b.query.hasOwnProperty(e)||a.query[e]!==b.query[e])return!1}}else if(!b.hasOwnProperty(e)||a[e]!==b[e])return!1}return!0}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"compareRouterStates",{enumerable:!0,get:function(){return c}})},39216:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>C.a,__next_app__:()=>I,handler:()=>K,pages:()=>H,routeModule:()=>J,tree:()=>G});var d=c(65239),e=c(48088),f=c(47220),g=c(81289),h=c(26191),i=c(14823),j=c(71998),k=c(92603),l=c(54649),m=c(32781),n=c(82602),o=c(61268),p=c(4853),q=c(261),r=c(5052),s=c(9977),t=c(26713),u=c(43365),v=c(71454),w=c(67778),x=c(46143),y=c(39105),z=c(38171),A=c(86439),B=c(16133),C=c.n(B),D=c(30893),E=c(52836),F={};for(let a in D)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(F[a]=()=>D[a]);c.d(b,F);let G={children:["",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,98245)),"/Users/onebird/github/mcp-chat-client/app/settings/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(c.bind(c,58014)),"/Users/onebird/github/mcp-chat-client/app/layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,16133,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,80849,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,29868,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,79615,23)),"next/dist/client/components/builtin/unauthorized.js"]}]}.children,H=["/Users/onebird/github/mcp-chat-client/app/settings/page.tsx"],I={require:c,loadChunk:()=>Promise.resolve()},J=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/settings/page",pathname:"/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:G},distDir:".next",projectDir:""});async function K(a,b,c){var d;let B="/settings/page";"/index"===B&&(B="/");let F="false",L=(0,h.getRequestMeta)(a,"postponed"),M=(0,h.getRequestMeta)(a,"minimalMode"),N=await J.prepare(a,b,{srcPage:B,multiZoneDraftMode:F});if(!N)return b.statusCode=400,b.end("Bad Request"),null==c.waitUntil||c.waitUntil.call(c,Promise.resolve()),null;let{buildId:O,query:P,params:Q,parsedUrl:R,pageIsDynamic:S,buildManifest:T,nextFontManifest:U,reactLoadableManifest:V,serverActionsManifest:W,clientReferenceManifest:X,subresourceIntegrityManifest:Y,prerenderManifest:Z,isDraftMode:$,resolvedPathname:_,revalidateOnlyGenerated:aa,routerServerContext:ab,nextConfig:ac}=N,ad=R.pathname||"/",ae=(0,q.normalizeAppPath)(B),{isOnDemandRevalidate:af}=N,ag=Z.dynamicRoutes[ae],ah=Z.routes[_],ai=!!(ag||ah||Z.routes[ae]),aj=a.headers["user-agent"]||"",ak=(0,t.getBotType)(aj),al=(0,o.isHtmlBotRequest)(a),am=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??!!a.headers[s.NEXT_ROUTER_PREFETCH_HEADER],an=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[s.RSC_HEADER],ao=(0,r.getIsPossibleServerAction)(a),ap=(0,l.checkIsAppPPREnabled)(ac.experimental.ppr)&&(null==(d=Z.routes[ae]??Z.dynamicRoutes[ae])?void 0:d.renderingMode)==="PARTIALLY_STATIC",aq=!1,ar=!1,as=ap?L:void 0,at=ap&&an&&!am,au=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),av=!aj||(0,o.shouldServeStreamingMetadata)(aj,ac.htmlLimitedBots);al&&ap&&(ai=!1,av=!1);let aw=!0===J.isDev||!ai||"string"==typeof L||at,ax=al&&ap,ay=null;$||!ai||aw||ao||as||at||(ay=_);let az=ay;!az&&J.isDev&&(az=_);let aA={...D,tree:G,pages:H,GlobalError:C(),handler:K,routeModule:J,__next_app__:I};W&&X&&(0,n.setReferenceManifestsSingleton)({page:B,clientReferenceManifest:X,serverActionsManifest:W,serverModuleMap:(0,p.createServerModuleMap)({serverActionsManifest:W})});let aB=a.method||"GET",aC=(0,g.getTracer)(),aD=aC.getActiveScopeSpan();try{let d=async(c,d)=>{let e=new k.NodeNextRequest(a),f=new k.NodeNextResponse(b);return J.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aC.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aB} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aB} ${a.url}`)})},f=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:P,params:Q,page:ae,sharedContext:{buildId:O},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aA,Component:(0,j.T)(aA),params:Q,routeModule:J,page:B,postponed:f,shouldWaitOnAllReady:ax,serveStreamingMetadata:av,supportsDynamicResponse:"string"==typeof f||aw,buildManifest:T,nextFontManifest:U,reactLoadableManifest:V,subresourceIntegrityManifest:Y,serverActionsManifest:W,clientReferenceManifest:X,setIsrStatus:null==ab?void 0:ab.setIsrStatus,dir:J.projectDir,isDraftMode:$,isRevalidate:ai&&!f&&!at,botType:ak,isOnDemandRevalidate:af,isPossibleServerAction:ao,assetPrefix:ac.assetPrefix,nextConfigOutput:ac.output,crossOrigin:ac.crossOrigin,trailingSlash:ac.trailingSlash,previewProps:Z.preview,deploymentId:ac.deploymentId,enableTainting:ac.experimental.taint,htmlLimitedBots:ac.htmlLimitedBots,devtoolSegmentExplorer:ac.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ac.reactMaxHeadersLength,multiZoneDraftMode:F,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ac.experimental.cacheLife,basePath:ac.basePath,serverActions:ac.experimental.serverActions,...aq?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:aq}:{},experimental:{isRoutePPREnabled:ap,expireTime:ac.expireTime,staleTimes:ac.experimental.staleTimes,dynamicIO:!!ac.experimental.dynamicIO,clientSegmentCache:!!ac.experimental.clientSegmentCache,dynamicOnHover:!!ac.experimental.dynamicOnHover,inlineCss:!!ac.experimental.inlineCss,authInterrupts:!!ac.experimental.authInterrupts,clientTraceMetadata:ac.experimental.clientTraceMetadata||[]},waitUntil:c.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>J.onRequestError(a,b,d,ab),err:(0,h.getRequestMeta)(a,"invokeError"),dev:J.isDev}},k=await d(e,i),{metadata:l}=k,{cacheControl:m,headers:n={},fetchTags:o}=l;if(o&&(n[x.NEXT_CACHE_TAGS_HEADER]=o),a.fetchMetrics=l.fetchMetrics,ai&&(null==m?void 0:m.revalidate)===0&&!J.isDev&&!ap){let a=l.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${_}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:u.CachedRouteKind.APP_PAGE,html:k,headers:n,rscData:l.flightData,postponed:l.postponed,status:l.statusCode,segmentData:l.segmentData},cacheControl:m}},l=async({hasResolved:d,previousCacheEntry:g,isRevalidating:i,span:j})=>{let k,l=!1===J.isDev,n=d||b.writableEnded;if(af&&aa&&!g&&!M)return(null==ab?void 0:ab.render404)?await ab.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ag&&(k=(0,v.parseFallbackField)(ag.fallback)),k===v.FallbackMode.PRERENDER&&(0,t.isBot)(aj)&&(k=v.FallbackMode.BLOCKING_STATIC_RENDER),(null==g?void 0:g.isStale)===-1&&(af=!0),af&&(k!==v.FallbackMode.NOT_FOUND||g)&&(k=v.FallbackMode.BLOCKING_STATIC_RENDER),!M&&k!==v.FallbackMode.BLOCKING_STATIC_RENDER&&az&&!n&&!$&&S&&(l||!ah)){let b;if((l||ag)&&k===v.FallbackMode.NOT_FOUND)throw new A.NoFallbackError;if(ap&&!an){if(b=await J.handleResponse({cacheKey:l?ae:null,req:a,nextConfig:ac,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:Z,isRoutePPREnabled:ap,responseGenerator:async()=>f({span:j,postponed:void 0,fallbackRouteParams:l||ar?(0,m.u)(ae):null}),waitUntil:c.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=af||i||!as?void 0:as;if(aq&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:u.CachedRouteKind.PAGES,html:w.default.fromStatic(""),pageData:{},headers:void 0,status:void 0}};let p=S&&ap&&((0,h.getRequestMeta)(a,"renderFallbackShell")||ar)?(0,m.u)(ad):null;return f({span:j,postponed:o,fallbackRouteParams:p})},n=async d=>{var g,i,j,k,m;let n,o=await J.handleResponse({cacheKey:ay,responseGenerator:a=>l({span:d,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:af,isRoutePPREnabled:ap,req:a,nextConfig:ac,prerenderManifest:Z,waitUntil:c.waitUntil});if($&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),J.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!o){if(ay)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(g=o.value)?void 0:g.kind)!==u.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(j=o.value)?void 0:j.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof o.value.postponed;ai&&!at&&(!p||am)&&(M||b.setHeader("x-nextjs-cache",af?"REVALIDATED":o.isMiss?"MISS":o.isStale?"STALE":"HIT"),b.setHeader(s.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=o;if(as)n={revalidate:0,expire:void 0};else if(M&&an&&!am&&ap)n={revalidate:0,expire:void 0};else if(!J.isDev)if($)n={revalidate:0,expire:void 0};else if(ai){if(o.cacheControl)if("number"==typeof o.cacheControl.revalidate){if(o.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${o.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});n={revalidate:o.cacheControl.revalidate,expire:(null==(k=o.cacheControl)?void 0:k.expire)??ac.expireTime}}else n={revalidate:x.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(n={revalidate:0,expire:void 0});if(o.cacheControl=n,"string"==typeof au&&(null==q?void 0:q.kind)===u.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(s.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(m=q.headers)?void 0:m[x.NEXT_CACHE_TAGS_HEADER];M&&ai&&c&&"string"==typeof c&&b.setHeader(x.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(au);return void 0!==d?(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:w.default.fromStatic(d),cacheControl:o.cacheControl}):(b.statusCode=204,(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:w.default.fromStatic(""),cacheControl:o.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...o,value:{...o.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&as)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(M&&ai||delete a[x.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let t=null==(i=q.headers)?void 0:i[x.NEXT_CACHE_TAGS_HEADER];if(M&&ai&&t&&"string"==typeof t&&b.setHeader(x.NEXT_CACHE_TAGS_HEADER,t),!q.status||an&&ap||(b.statusCode=q.status),!M&&q.status&&E.RedirectStatusCode[q.status]&&an&&(b.statusCode=200),p&&b.setHeader(s.NEXT_DID_POSTPONE_HEADER,"1"),an&&!$){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:q.html,cacheControl:at?{revalidate:0,expire:void 0}:o.cacheControl})}return(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:w.default.fromStatic(q.rscData),cacheControl:o.cacheControl})}let v=q.html;if(!p||M)return(0,z.sendRenderResult)({req:a,res:b,type:"html",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:v,cacheControl:o.cacheControl});if(aq)return v.chain(new ReadableStream({start(a){a.enqueue(y.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,z.sendRenderResult)({req:a,res:b,type:"html",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:v,cacheControl:{revalidate:0,expire:void 0}});let A=new TransformStream;return v.chain(A.readable),f({span:d,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==u.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(A.writable)}).catch(a=>{A.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,z.sendRenderResult)({req:a,res:b,type:"html",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:v,cacheControl:{revalidate:0,expire:void 0}})};if(!aD)return await aC.withPropagatedContext(a.headers,()=>aC.trace(i.BaseServerSpan.handleRequest,{spanName:`${aB} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aB,"http.target":a.url}},n));await n(aD)}catch(b){throw aD||b instanceof A.NoFallbackError||await J.onRequestError(a,b,{routerKind:"App Router",routePath:B,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ai,isOnDemandRevalidate:af})},ab),b}}},39678:(a,b,c)=>{Promise.resolve().then(c.bind(c,76905)),Promise.resolve().then(c.bind(c,43292)),Promise.resolve().then(c.bind(c,52619)),Promise.resolve().then(c.bind(c,94924)),Promise.resolve().then(c.bind(c,906))},40932:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{cancelIdleCallback:function(){return d},requestIdleCallback:function(){return c}});let c="undefined"!=typeof self&&self.requestIdleCallback&&self.requestIdleCallback.bind(window)||function(a){let b=Date.now();return self.setTimeout(function(){a({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-b))}})},1)},d="undefined"!=typeof self&&self.cancelIdleCallback&&self.cancelIdleCallback.bind(window)||function(a){return clearTimeout(a)};("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},41025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},41292:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"denormalizePagePath",{enumerable:!0,get:function(){return f}});let d=c(52674),e=c(14104);function f(a){let b=(0,e.normalizePathSep)(a);return b.startsWith("/index/")&&!(0,d.isDynamicRoute)(b)?b.slice(6):"/index"!==b?b:"/"}},45044:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"isDynamicRoute",{enumerable:!0,get:function(){return g}});let d=c(72859),e=/\/[^/]*\[[^/]+\][^/]*(?=\/|$)/,f=/\/\[[^/]+\](?=\/|$)/;function g(a,b){return(void 0===b&&(b=!0),(0,d.isInterceptionRouteAppPath)(a)&&(a=(0,d.extractInterceptionRouteInformation)(a).interceptedRoute),b)?f.test(a):e.test(a)}},45346:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"resolveHref",{enumerable:!0,get:function(){return l}});let d=c(76715),e=c(30195),f=c(25117),g=c(79289),h=c(54674),i=c(61794),j=c(52674),k=c(84530);function l(a,b,c){let l,m="string"==typeof b?b:(0,e.formatWithValidation)(b),n=m.match(/^[a-z][a-z0-9+.-]*:\/\//i),o=n?m.slice(n[0].length):m;if((o.split("?",1)[0]||"").match(/(\/\/|\\)/)){console.error("Invalid href '"+m+"' passed to next/router in page: '"+a.pathname+"'. Repeated forward-slashes (//) or backslashes \\ are not valid in the href.");let b=(0,g.normalizeRepeatedSlashes)(o);m=(n?n[0]:"")+b}if(!(0,i.isLocalURL)(m))return c?[m]:m;try{l=new URL(m.startsWith("#")?a.asPath:a.pathname,"http://n")}catch(a){l=new URL("/","http://n")}try{let a=new URL(m,l);a.pathname=(0,h.normalizePathTrailingSlash)(a.pathname);let b="";if((0,j.isDynamicRoute)(a.pathname)&&a.searchParams&&c){let c=(0,d.searchParamsToUrlQuery)(a.searchParams),{result:g,params:h}=(0,k.interpolateAs)(a.pathname,a.pathname,c);g&&(b=(0,e.formatWithValidation)({pathname:g,hash:a.hash,query:(0,f.omit)(c,h)}))}let g=a.origin===l.origin?a.href.slice(a.origin.length):a.href;return c?[g,b||g]:g}catch(a){return c?[m]:m}}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},50075:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"removePathPrefix",{enumerable:!0,get:function(){return e}});let d=c(2255);function e(a,b){if(!(0,d.pathHasPrefix)(a,b))return a;let c=a.slice(b.length);return c.startsWith("/")?c:"/"+c}},52668:(a,b)=>{"use strict";function c(a,b){return void 0===b&&(b=""),("/"===a?"/index":/^\/index(\/|$)/.test(a)?"/index"+a:a)+b}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"default",{enumerable:!0,get:function(){return c}})},52674:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{getSortedRouteObjects:function(){return d.getSortedRouteObjects},getSortedRoutes:function(){return d.getSortedRoutes},isDynamicRoute:function(){return e.isDynamicRoute}});let d=c(7e4),e=c(45044)},53403:(a,b)=>{"use strict";function c(a){return"/api"===a||!!(null==a?void 0:a.startsWith("/api/"))}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"isAPIRoute",{enumerable:!0,get:function(){return c}})},57075:a=>{"use strict";a.exports=require("node:stream")},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},65430:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"parseRelativeUrl",{enumerable:!0,get:function(){return e}}),c(79289);let d=c(76715);function e(a,b,c){void 0===c&&(c=!0);let e=new URL("http://n"),f=b?new URL(b,e):a.startsWith(".")?new URL("http://n"):e,{pathname:g,searchParams:h,search:i,hash:j,href:k,origin:l}=new URL(a,f);if(l!==e.origin)throw Object.defineProperty(Error("invariant: invalid relative URL, router received "+a),"__NEXT_ERROR_CODE",{value:"E159",enumerable:!1,configurable:!0});return{pathname:g,query:c?(0,d.searchParamsToUrlQuery)(h):void 0,search:i,hash:j,href:k.slice(l.length),slashes:void 0}}},69148:(a,b,c)=>{"use strict";a.exports=c(94041).vendored.contexts.RouterContext},7e4:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{getSortedRouteObjects:function(){return e},getSortedRoutes:function(){return d}});class c{insert(a){this._insert(a.split("/").filter(Boolean),[],!1)}smoosh(){return this._smoosh()}_smoosh(a){void 0===a&&(a="/");let b=[...this.children.keys()].sort();null!==this.slugName&&b.splice(b.indexOf("[]"),1),null!==this.restSlugName&&b.splice(b.indexOf("[...]"),1),null!==this.optionalRestSlugName&&b.splice(b.indexOf("[[...]]"),1);let c=b.map(b=>this.children.get(b)._smoosh(""+a+b+"/")).reduce((a,b)=>[...a,...b],[]);if(null!==this.slugName&&c.push(...this.children.get("[]")._smoosh(a+"["+this.slugName+"]/")),!this.placeholder){let b="/"===a?"/":a.slice(0,-1);if(null!=this.optionalRestSlugName)throw Object.defineProperty(Error('You cannot define a route with the same specificity as a optional catch-all route ("'+b+'" and "'+b+"[[..."+this.optionalRestSlugName+']]").'),"__NEXT_ERROR_CODE",{value:"E458",enumerable:!1,configurable:!0});c.unshift(b)}return null!==this.restSlugName&&c.push(...this.children.get("[...]")._smoosh(a+"[..."+this.restSlugName+"]/")),null!==this.optionalRestSlugName&&c.push(...this.children.get("[[...]]")._smoosh(a+"[[..."+this.optionalRestSlugName+"]]/")),c}_insert(a,b,d){if(0===a.length){this.placeholder=!1;return}if(d)throw Object.defineProperty(Error("Catch-all must be the last part of the URL."),"__NEXT_ERROR_CODE",{value:"E392",enumerable:!1,configurable:!0});let e=a[0];if(e.startsWith("[")&&e.endsWith("]")){let c=e.slice(1,-1),g=!1;if(c.startsWith("[")&&c.endsWith("]")&&(c=c.slice(1,-1),g=!0),c.startsWith("…"))throw Object.defineProperty(Error("Detected a three-dot character ('…') at ('"+c+"'). Did you mean ('...')?"),"__NEXT_ERROR_CODE",{value:"E147",enumerable:!1,configurable:!0});if(c.startsWith("...")&&(c=c.substring(3),d=!0),c.startsWith("[")||c.endsWith("]"))throw Object.defineProperty(Error("Segment names may not start or end with extra brackets ('"+c+"')."),"__NEXT_ERROR_CODE",{value:"E421",enumerable:!1,configurable:!0});if(c.startsWith("."))throw Object.defineProperty(Error("Segment names may not start with erroneous periods ('"+c+"')."),"__NEXT_ERROR_CODE",{value:"E288",enumerable:!1,configurable:!0});function f(a,c){if(null!==a&&a!==c)throw Object.defineProperty(Error("You cannot use different slug names for the same dynamic path ('"+a+"' !== '"+c+"')."),"__NEXT_ERROR_CODE",{value:"E337",enumerable:!1,configurable:!0});b.forEach(a=>{if(a===c)throw Object.defineProperty(Error('You cannot have the same slug name "'+c+'" repeat within a single dynamic path'),"__NEXT_ERROR_CODE",{value:"E247",enumerable:!1,configurable:!0});if(a.replace(/\W/g,"")===e.replace(/\W/g,""))throw Object.defineProperty(Error('You cannot have the slug names "'+a+'" and "'+c+'" differ only by non-word symbols within a single dynamic path'),"__NEXT_ERROR_CODE",{value:"E499",enumerable:!1,configurable:!0})}),b.push(c)}if(d)if(g){if(null!=this.restSlugName)throw Object.defineProperty(Error('You cannot use both an required and optional catch-all route at the same level ("[...'+this.restSlugName+']" and "'+a[0]+'" ).'),"__NEXT_ERROR_CODE",{value:"E299",enumerable:!1,configurable:!0});f(this.optionalRestSlugName,c),this.optionalRestSlugName=c,e="[[...]]"}else{if(null!=this.optionalRestSlugName)throw Object.defineProperty(Error('You cannot use both an optional and required catch-all route at the same level ("[[...'+this.optionalRestSlugName+']]" and "'+a[0]+'").'),"__NEXT_ERROR_CODE",{value:"E300",enumerable:!1,configurable:!0});f(this.restSlugName,c),this.restSlugName=c,e="[...]"}else{if(g)throw Object.defineProperty(Error('Optional route parameters are not yet supported ("'+a[0]+'").'),"__NEXT_ERROR_CODE",{value:"E435",enumerable:!1,configurable:!0});f(this.slugName,c),this.slugName=c,e="[]"}}this.children.has(e)||this.children.set(e,new c),this.children.get(e)._insert(a.slice(1),b,d)}constructor(){this.placeholder=!0,this.children=new Map,this.slugName=null,this.restSlugName=null,this.optionalRestSlugName=null}}function d(a){let b=new c;return a.forEach(a=>b.insert(a)),b.smoosh()}function e(a,b){let c={},e=[];for(let d=0;d<a.length;d++){let f=b(a[d]);c[f]=d,e[d]=f}return d(e).map(b=>a[c[b]])}},70519:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"escapeStringRegexp",{enumerable:!0,get:function(){return e}});let c=/[|\\{}()[\]^$+*?.-]/,d=/[|\\{}()[\]^$+*?.-]/g;function e(a){return c.test(a)?a.replace(d,"\\$&"):a}},71025:(a,b)=>{"use strict";let c;function d(a){return(null==c?void 0:c.createScriptURL(a))||a}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"__unsafeCreateTrustedScriptURL",{enumerable:!0,get:function(){return d}}),("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},72954:a=>{a.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},74075:a=>{"use strict";a.exports=require("zlib")},76267:(a,b,c)=>{(()=>{var b={154:(a,b,c)=>{var d=c(781),e=["write","end","destroy"],f=["resume","pause"],g=["data","close"],h=Array.prototype.slice;function i(a,b){if(a.forEach)return a.forEach(b);for(var c=0;c<a.length;c++)b(a[c],c)}a.exports=function(a,b){var c=new d,j=!1;return i(e,function(b){c[b]=function(){return a[b].apply(a,arguments)}}),i(f,function(a){c[a]=function(){c.emit(a);var d=b[a];if(d)return d.apply(b,arguments);b.emit(a)}}),i(g,function(a){b.on(a,function(){var b=h.call(arguments);b.unshift(a),c.emit.apply(c,b)})}),b.on("end",function(){if(!j){j=!0;var a=h.call(arguments);a.unshift("end"),c.emit.apply(c,a)}}),a.on("drain",function(){c.emit("drain")}),a.on("error",k),b.on("error",k),c.writable=a.writable,c.readable=b.readable,c;function k(a){c.emit("error",a)}}},349:(a,b,c)=>{"use strict";let d=c(147),e=c(781),f=c(796),g=c(154),h=c(530),i=a=>Object.assign({level:9},a);a.exports=(a,b)=>a?h(f.gzip)(a,i(b)).then(a=>a.length).catch(a=>0):Promise.resolve(0),a.exports.sync=(a,b)=>f.gzipSync(a,i(b)).length,a.exports.stream=a=>{let b=new e.PassThrough,c=new e.PassThrough,d=g(b,c),h=0,j=f.createGzip(i(a)).on("data",a=>{h+=a.length}).on("error",()=>{d.gzipSize=0}).on("end",()=>{d.gzipSize=h,d.emit("gzip-size",h),c.end()});return b.pipe(j),b.pipe(c,{end:!1}),d},a.exports.file=(b,c)=>new Promise((e,f)=>{let g=d.createReadStream(b);g.on("error",f);let h=g.pipe(a.exports.stream(c));h.on("error",f),h.on("gzip-size",e)}),a.exports.fileSync=(b,c)=>a.exports.sync(d.readFileSync(b),c)},530:a=>{"use strict";let b=(a,b)=>function(...c){return new b.promiseModule((d,e)=>{b.multiArgs?c.push((...a)=>{b.errorFirst?a[0]?e(a):(a.shift(),d(a)):d(a)}):b.errorFirst?c.push((a,b)=>{a?e(a):d(b)}):c.push(d),a.apply(this,c)})};a.exports=(a,c)=>{let d;c=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},c);let e=typeof a;if(null===a||"object"!==e&&"function"!==e)throw TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${null===a?"null":e}\``);let f=a=>{let b=b=>"string"==typeof b?a===b:b.test(a);return c.include?c.include.some(b):!c.exclude.some(b)};for(let g in d="function"===e?function(...d){return c.excludeMain?a(...d):b(a,c).apply(this,d)}:Object.create(Object.getPrototypeOf(a)),a){let e=a[g];d[g]="function"==typeof e&&f(g)?b(e,c):e}return d}},147:a=>{"use strict";a.exports=c(29021)},781:a=>{"use strict";a.exports=c(27910)},796:a=>{"use strict";a.exports=c(74075)}},d={};function e(a){var c=d[a];if(void 0!==c)return c.exports;var f=d[a]={exports:{}},g=!0;try{b[a](f,f.exports,e),g=!1}finally{g&&delete d[a]}return f.exports}e.ab=__dirname+"/",a.exports=e(349)})()},78435:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"removeLocale",{enumerable:!0,get:function(){return e}});let d=c(19169);function e(a,b){{let{pathname:c}=(0,d.parsePath)(a),e=c.toLowerCase(),f=null==b?void 0:b.toLowerCase();return b&&(e.startsWith("/"+f+"/")||e==="/"+f)?(c.length===b.length+1?"/":"")+a.slice(b.length+1):a}}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},79167:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{default:function(){return r},handleClientScriptLoad:function(){return o},initScriptLoader:function(){return p}});let d=c(14985),e=c(40740),f=c(60687),g=d._(c(51215)),h=e._(c(43210)),i=c(89513),j=c(7448),k=c(40932),l=new Map,m=new Set,n=a=>{let{src:b,id:c,onLoad:d=()=>{},onReady:e=null,dangerouslySetInnerHTML:f,children:h="",strategy:i="afterInteractive",onError:k,stylesheets:n}=a,o=c||b;if(o&&m.has(o))return;if(l.has(b)){m.add(o),l.get(b).then(d,k);return}let p=()=>{e&&e(),m.add(o)},q=document.createElement("script"),r=new Promise((a,b)=>{q.addEventListener("load",function(b){a(),d&&d.call(this,b),p()}),q.addEventListener("error",function(a){b(a)})}).catch(function(a){k&&k(a)});f?(q.innerHTML=f.__html||"",p()):h?(q.textContent="string"==typeof h?h:Array.isArray(h)?h.join(""):"",p()):b&&(q.src=b,l.set(b,r)),(0,j.setAttributesFromProps)(q,a),"worker"===i&&q.setAttribute("type","text/partytown"),q.setAttribute("data-nscript",i),n&&(a=>{if(g.default.preinit)return a.forEach(a=>{g.default.preinit(a,{as:"style"})})})(n),document.body.appendChild(q)};function o(a){let{strategy:b="afterInteractive"}=a;"lazyOnload"===b?window.addEventListener("load",()=>{(0,k.requestIdleCallback)(()=>n(a))}):n(a)}function p(a){a.forEach(o),[...document.querySelectorAll('[data-nscript="beforeInteractive"]'),...document.querySelectorAll('[data-nscript="beforePageRender"]')].forEach(a=>{let b=a.id||a.getAttribute("src");m.add(b)})}function q(a){let{id:b,src:c="",onLoad:d=()=>{},onReady:e=null,strategy:j="afterInteractive",onError:l,stylesheets:o,...p}=a,{updateScripts:q,scripts:r,getIsSsr:s,appDir:t,nonce:u}=(0,h.useContext)(i.HeadManagerContext);u=p.nonce||u;let v=(0,h.useRef)(!1);(0,h.useEffect)(()=>{let a=b||c;v.current||(e&&a&&m.has(a)&&e(),v.current=!0)},[e,b,c]);let w=(0,h.useRef)(!1);if((0,h.useEffect)(()=>{if(!w.current){if("afterInteractive"===j)n(a);else"lazyOnload"===j&&("complete"===document.readyState?(0,k.requestIdleCallback)(()=>n(a)):window.addEventListener("load",()=>{(0,k.requestIdleCallback)(()=>n(a))}));w.current=!0}},[a,j]),("beforeInteractive"===j||"worker"===j)&&(q?(r[j]=(r[j]||[]).concat([{id:b,src:c,onLoad:d,onReady:e,onError:l,...p,nonce:u}]),q(r)):s&&s()?m.add(b||c):s&&!s()&&n({...a,nonce:u})),t){if(o&&o.forEach(a=>{g.default.preinit(a,{as:"style"})}),"beforeInteractive"===j)if(!c)return p.dangerouslySetInnerHTML&&(p.children=p.dangerouslySetInnerHTML.__html,delete p.dangerouslySetInnerHTML),(0,f.jsx)("script",{nonce:u,dangerouslySetInnerHTML:{__html:"(self.__next_s=self.__next_s||[]).push("+JSON.stringify([0,{...p,id:b}])+")"}});else return g.default.preload(c,p.integrity?{as:"script",integrity:p.integrity,nonce:u,crossOrigin:p.crossOrigin}:{as:"script",nonce:u,crossOrigin:p.crossOrigin}),(0,f.jsx)("script",{nonce:u,dangerouslySetInnerHTML:{__html:"(self.__next_s=self.__next_s||[]).push("+JSON.stringify([c,{...p,id:b}])+")"}});"afterInteractive"===j&&c&&g.default.preload(c,p.integrity?{as:"script",integrity:p.integrity,nonce:u,crossOrigin:p.crossOrigin}:{as:"script",nonce:u,crossOrigin:p.crossOrigin})}return null}Object.defineProperty(q,"__nextScript",{value:!0});let r=q;("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},79171:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{createKey:function(){return S},default:function(){return V},matchesMiddleware:function(){return K}});let d=c(14985),e=c(40740),f=c(84949),g=c(79772),h=c(79167),i=e._(c(98557)),j=c(41292),k=c(16493),l=d._(c(6584)),m=c(79289),n=c(45044),o=c(65430),p=c(12352),q=c(33645),r=c(30195),s=c(25779),t=c(19169),u=c(23640),v=c(78435),w=c(25942),x=c(96127),y=c(26736),z=c(45346),A=c(53403),B=c(32532),C=c(87331),D=c(38848),E=c(61794);c(35416);let F=c(25117),G=c(84530),H=c(85919),I=c(13985);function J(){return Object.assign(Object.defineProperty(Error("Route Cancelled"),"__NEXT_ERROR_CODE",{value:"E315",enumerable:!1,configurable:!0}),{cancelled:!0})}async function K(a){let b=await Promise.resolve(a.router.pageLoader.getMiddleware());if(!b)return!1;let{pathname:c}=(0,t.parsePath)(a.asPath),d=(0,y.hasBasePath)(c)?(0,w.removeBasePath)(c):c,e=(0,x.addBasePath)((0,u.addLocale)(d,a.locale));return b.some(a=>new RegExp(a.regexp).test(e))}function L(a){let b=(0,m.getLocationOrigin)();return a.startsWith(b)?a.substring(b.length):a}function M(a,b,c){let[d,e]=(0,z.resolveHref)(a,b,!0),f=(0,m.getLocationOrigin)(),g=d.startsWith(f),h=e&&e.startsWith(f);d=L(d),e=e?L(e):e;let i=g?d:(0,x.addBasePath)(d),j=c?L((0,z.resolveHref)(a,c)):e||d;return{url:i,as:h?j:(0,x.addBasePath)(j)}}function N(a,b){let c=(0,f.removeTrailingSlash)((0,j.denormalizePagePath)(a));return"/404"===c||"/_error"===c?a:(b.includes(c)||b.some(b=>{if((0,n.isDynamicRoute)(b)&&(0,q.getRouteRegex)(b).re.test(c))return a=b,!0}),(0,f.removeTrailingSlash)(a))}async function O(a){if(!await K(a)||!a.fetchData)return null;let b=await a.fetchData(),c=await function(a,b,c){let d={basePath:c.router.basePath,i18n:{locales:c.router.locales},trailingSlash:!1},e=b.headers.get("x-nextjs-rewrite"),h=e||b.headers.get("x-nextjs-matched-path"),i=b.headers.get(I.MATCHED_PATH_HEADER);if(!i||h||i.includes("__next_data_catchall")||i.includes("/_error")||i.includes("/404")||(h=i),h){if(h.startsWith("/")){let b=(0,o.parseRelativeUrl)(h),i=(0,B.getNextPathnameInfo)(b.pathname,{nextConfig:d,parseData:!0}),j=(0,f.removeTrailingSlash)(i.pathname);return Promise.all([c.router.pageLoader.getPageList(),(0,g.getClientBuildManifest)()]).then(f=>{let[g,{__rewrites:h}]=f,l=(0,u.addLocale)(i.pathname,i.locale);if((0,n.isDynamicRoute)(l)||!e&&g.includes((0,k.normalizeLocalePath)((0,w.removeBasePath)(l),c.router.locales).pathname)){let c=(0,B.getNextPathnameInfo)((0,o.parseRelativeUrl)(a).pathname,{nextConfig:d,parseData:!0});b.pathname=l=(0,x.addBasePath)(c.pathname)}if(!g.includes(j)){let a=N(j,g);a!==j&&(j=a)}let m=g.includes(j)?j:N((0,k.normalizeLocalePath)((0,w.removeBasePath)(b.pathname),c.router.locales).pathname,g);if((0,n.isDynamicRoute)(m)){let a=(0,p.getRouteMatcher)((0,q.getRouteRegex)(m))(l);Object.assign(b.query,a||{})}return{type:"rewrite",parsedAs:b,resolvedHref:m}})}let b=(0,t.parsePath)(a);return Promise.resolve({type:"redirect-external",destination:""+(0,C.formatNextPathnameInfo)({...(0,B.getNextPathnameInfo)(b.pathname,{nextConfig:d,parseData:!0}),defaultLocale:c.router.defaultLocale,buildId:""})+b.query+b.hash})}let j=b.headers.get("x-nextjs-redirect");if(j){if(j.startsWith("/")){let a=(0,t.parsePath)(j),b=(0,C.formatNextPathnameInfo)({...(0,B.getNextPathnameInfo)(a.pathname,{nextConfig:d,parseData:!0}),defaultLocale:c.router.defaultLocale,buildId:""});return Promise.resolve({type:"redirect-internal",newAs:""+b+a.query+a.hash,newUrl:""+b+a.query+a.hash})}return Promise.resolve({type:"redirect-external",destination:j})}return Promise.resolve({type:"next"})}(b.dataHref,b.response,a);return{dataHref:b.dataHref,json:b.json,response:b.response,text:b.text,cacheKey:b.cacheKey,effect:c}}let P=Symbol("SSG_DATA_NOT_FOUND");function Q(a){try{return JSON.parse(a)}catch(a){return null}}function R(a){let{dataHref:b,inflightCache:c,isPrefetch:d,hasMiddleware:e,isServerRender:f,parseJSON:h,persistCache:i,isBackground:j,unstable_skipClientCache:k}=a,{href:l}=new URL(b,window.location.href),m=a=>{var j;return(function a(b,c,d){return fetch(b,{credentials:"same-origin",method:d.method||"GET",headers:Object.assign({},d.headers,{"x-nextjs-data":"1"})}).then(e=>!e.ok&&c>1&&e.status>=500?a(b,c-1,d):e)})(b,f?3:1,{headers:Object.assign({},d?{purpose:"prefetch"}:{},d&&e?{"x-middleware-prefetch":"1"}:{},{}),method:null!=(j=null==a?void 0:a.method)?j:"GET"}).then(c=>c.ok&&(null==a?void 0:a.method)==="HEAD"?{dataHref:b,response:c,text:"",json:{},cacheKey:l}:c.text().then(a=>{if(!c.ok){if(e&&[301,302,307,308].includes(c.status))return{dataHref:b,response:c,text:a,json:{},cacheKey:l};if(404===c.status){var d;if(null==(d=Q(a))?void 0:d.notFound)return{dataHref:b,json:{notFound:P},response:c,text:a,cacheKey:l}}let h=Object.defineProperty(Error("Failed to load static props"),"__NEXT_ERROR_CODE",{value:"E124",enumerable:!1,configurable:!0});throw f||(0,g.markAssetError)(h),h}return{dataHref:b,json:h?Q(a):null,response:c,text:a,cacheKey:l}})).then(a=>(i&&"no-cache"!==a.response.headers.get("x-middleware-cache")||delete c[l],a)).catch(a=>{throw k||delete c[l],("Failed to fetch"===a.message||"NetworkError when attempting to fetch resource."===a.message||"Load failed"===a.message)&&(0,g.markAssetError)(a),a})};return k&&i?m({}).then(a=>("no-cache"!==a.response.headers.get("x-middleware-cache")&&(c[l]=Promise.resolve(a)),a)):void 0!==c[l]?c[l]:c[l]=m(j?{method:"HEAD"}:{})}function S(){return Math.random().toString(36).slice(2,10)}function T(a){let{url:b,router:c}=a;if(b===(0,x.addBasePath)((0,u.addLocale)(c.asPath,c.locale)))throw Object.defineProperty(Error("Invariant: attempted to hard navigate to the same URL "+b+" "+location.href),"__NEXT_ERROR_CODE",{value:"E282",enumerable:!1,configurable:!0});window.location.href=b}let U=a=>{let{route:b,router:c}=a,d=!1,e=c.clc=()=>{d=!0};return()=>{if(d){let a=Object.defineProperty(Error('Abort fetching component for route: "'+b+'"'),"__NEXT_ERROR_CODE",{value:"E483",enumerable:!1,configurable:!0});throw a.cancelled=!0,a}e===c.clc&&(c.clc=null)}};class V{reload(){window.location.reload()}back(){window.history.back()}forward(){window.history.forward()}push(a,b,c){return void 0===c&&(c={}),{url:a,as:b}=M(this,a,b),this.change("pushState",a,b,c)}replace(a,b,c){return void 0===c&&(c={}),{url:a,as:b}=M(this,a,b),this.change("replaceState",a,b,c)}async _bfl(a,b,d,e){{if(!this._bfl_s&&!this._bfl_d){let b,f,{BloomFilter:h}=c(27618);try{({__routerFilterStatic:b,__routerFilterDynamic:f}=await (0,g.getClientBuildManifest)())}catch(b){if(console.error(b),e)return!0;return T({url:(0,x.addBasePath)((0,u.addLocale)(a,d||this.locale,this.defaultLocale)),router:this}),new Promise(()=>{})}(null==b?void 0:b.numHashes)&&(this._bfl_s=new h(b.numItems,b.errorRate),this._bfl_s.import(b)),(null==f?void 0:f.numHashes)&&(this._bfl_d=new h(f.numItems,f.errorRate),this._bfl_d.import(f))}let k=!1,l=!1;for(let{as:c,allowMatchCurrent:g}of[{as:a},{as:b}])if(c){let b=(0,f.removeTrailingSlash)(new URL(c,"http://n").pathname),m=(0,x.addBasePath)((0,u.addLocale)(b,d||this.locale));if(g||b!==(0,f.removeTrailingSlash)(new URL(this.asPath,"http://n").pathname)){var h,i,j;for(let a of(k=k||!!(null==(h=this._bfl_s)?void 0:h.contains(b))||!!(null==(i=this._bfl_s)?void 0:i.contains(m)),[b,m])){let b=a.split("/");for(let a=0;!l&&a<b.length+1;a++){let c=b.slice(0,a).join("/");if(c&&(null==(j=this._bfl_d)?void 0:j.contains(c))){l=!0;break}}}if(k||l){if(e)return!0;return T({url:(0,x.addBasePath)((0,u.addLocale)(a,d||this.locale,this.defaultLocale)),router:this}),new Promise(()=>{})}}}}return!1}async change(a,b,c,d,e){var j,l,z,A,B,C,H,I,L,O;let Q,R;if(!(0,E.isLocalURL)(b))return T({url:b,router:this}),!1;let S=1===d._h;S||d.shallow||await this._bfl(c,void 0,d.locale);let U=S||d._shouldResolveHref||(0,t.parsePath)(b).pathname===(0,t.parsePath)(c).pathname,W={...this.state},X=!0!==this.isReady;this.isReady=!0;let Y=this.isSsr;if(S||(this.isSsr=!1),S&&this.clc)return!1;let Z=W.locale;{W.locale=!1===d.locale?this.defaultLocale:d.locale||W.locale,void 0===d.locale&&(d.locale=W.locale);let a=(0,o.parseRelativeUrl)((0,y.hasBasePath)(c)?(0,w.removeBasePath)(c):c),e=(0,k.normalizeLocalePath)(a.pathname,this.locales);e.detectedLocale&&(W.locale=e.detectedLocale,a.pathname=(0,x.addBasePath)(a.pathname),c=(0,r.formatWithValidation)(a),b=(0,x.addBasePath)((0,k.normalizeLocalePath)((0,y.hasBasePath)(b)?(0,w.removeBasePath)(b):b,this.locales).pathname));let f=!1;(null==(l=this.locales)?void 0:l.includes(W.locale))||(a.pathname=(0,u.addLocale)(a.pathname,W.locale),T({url:(0,r.formatWithValidation)(a),router:this}),f=!0);let g=(0,s.detectDomainLocale)(this.domainLocales,void 0,W.locale);if(!f&&g&&this.isLocaleDomain&&self.location.hostname!==g.domain){let a=(0,w.removeBasePath)(c);T({url:"http"+(g.http?"":"s")+"://"+g.domain+(0,x.addBasePath)((W.locale===g.defaultLocale?"":"/"+W.locale)+("/"===a?"":a)||"/"),router:this}),f=!0}if(f)return new Promise(()=>{})}m.ST&&performance.mark("routeChange");let{shallow:$=!1,scroll:_=!0}=d,aa={shallow:$};this._inFlightRoute&&this.clc&&(Y||V.events.emit("routeChangeError",J(),this._inFlightRoute,aa),this.clc(),this.clc=null),c=(0,x.addBasePath)((0,u.addLocale)((0,y.hasBasePath)(c)?(0,w.removeBasePath)(c):c,d.locale,this.defaultLocale));let ab=(0,v.removeLocale)((0,y.hasBasePath)(c)?(0,w.removeBasePath)(c):c,W.locale);this._inFlightRoute=c;let ac=Z!==W.locale;if(!S&&this.onlyAHashChange(ab)&&!ac){W.asPath=ab,V.events.emit("hashChangeStart",c,aa),this.changeState(a,b,c,{...d,scroll:!1}),_&&this.scrollToHash(ab);try{await this.set(W,this.components[W.route],null)}catch(a){throw(0,i.default)(a)&&a.cancelled&&V.events.emit("routeChangeError",a,ab,aa),a}return V.events.emit("hashChangeComplete",c,aa),!0}let ad=(0,o.parseRelativeUrl)(b),{pathname:ae,query:af}=ad;try{[Q,{__rewrites:R}]=await Promise.all([this.pageLoader.getPageList(),(0,g.getClientBuildManifest)(),this.pageLoader.getMiddleware()])}catch(a){return T({url:c,router:this}),!1}this.urlIsNew(ab)||ac||(a="replaceState");let ag=c;ae=ae?(0,f.removeTrailingSlash)((0,w.removeBasePath)(ae)):ae;let ah=(0,f.removeTrailingSlash)(ae),ai=c.startsWith("/")&&(0,o.parseRelativeUrl)(c).pathname;if(null==(j=this.components[ae])?void 0:j.__appRouter)return T({url:c,router:this}),new Promise(()=>{});let aj=!!(ai&&ah!==ai&&(!(0,n.isDynamicRoute)(ah)||!(0,p.getRouteMatcher)((0,q.getRouteRegex)(ah))(ai))),ak=!d.shallow&&await K({asPath:c,locale:W.locale,router:this});if(S&&ak&&(U=!1),U&&"/_error"!==ae&&(d._shouldResolveHref=!0,ad.pathname=N(ae,Q),ad.pathname!==ae&&(ae=ad.pathname,ad.pathname=(0,x.addBasePath)(ae),ak||(b=(0,r.formatWithValidation)(ad)))),!(0,E.isLocalURL)(c))return T({url:c,router:this}),!1;ag=(0,v.removeLocale)((0,w.removeBasePath)(ag),W.locale),ah=(0,f.removeTrailingSlash)(ae);let al=!1;if((0,n.isDynamicRoute)(ah)){let a=(0,o.parseRelativeUrl)(ag),d=a.pathname,e=(0,q.getRouteRegex)(ah);al=(0,p.getRouteMatcher)(e)(d);let f=ah===d,g=f?(0,G.interpolateAs)(ah,d,af):{};if(al&&(!f||g.result))f?c=(0,r.formatWithValidation)(Object.assign({},a,{pathname:g.result,query:(0,F.omit)(af,g.params)})):Object.assign(af,al);else{let a=Object.keys(e.groups).filter(a=>!af[a]&&!e.groups[a].optional);if(a.length>0&&!ak)throw Object.defineProperty(Error((f?"The provided `href` ("+b+") value is missing query values ("+a.join(", ")+") to be interpolated properly. ":"The provided `as` value ("+d+") is incompatible with the `href` value ("+ah+"). ")+"Read more: https://nextjs.org/docs/messages/"+(f?"href-interpolation-failed":"incompatible-href-as")),"__NEXT_ERROR_CODE",{value:"E344",enumerable:!1,configurable:!0})}}S||V.events.emit("routeChangeStart",c,aa);let am="/404"===this.pathname||"/_error"===this.pathname;try{let f=await this.getRouteInfo({route:ah,pathname:ae,query:af,as:c,resolvedAs:ag,routeProps:aa,locale:W.locale,isPreview:W.isPreview,hasMiddleware:ak,unstable_skipClientCache:d.unstable_skipClientCache,isQueryUpdating:S&&!this.isFallback,isMiddlewareRewrite:aj});if(S||d.shallow||await this._bfl(c,"resolvedAs"in f?f.resolvedAs:void 0,W.locale),"route"in f&&ak){ah=ae=f.route||ah,aa.shallow||(af=Object.assign({},f.query||{},af));let a=(0,y.hasBasePath)(ad.pathname)?(0,w.removeBasePath)(ad.pathname):ad.pathname;if(al&&ae!==a&&Object.keys(al).forEach(a=>{al&&af[a]===al[a]&&delete af[a]}),(0,n.isDynamicRoute)(ae)){let a=!aa.shallow&&f.resolvedAs?f.resolvedAs:(0,x.addBasePath)((0,u.addLocale)(new URL(c,location.href).pathname,W.locale),!0);(0,y.hasBasePath)(a)&&(a=(0,w.removeBasePath)(a));{let b=(0,k.normalizeLocalePath)(a,this.locales);W.locale=b.detectedLocale||W.locale,a=b.pathname}let b=(0,q.getRouteRegex)(ae),d=(0,p.getRouteMatcher)(b)(new URL(a,location.href).pathname);d&&Object.assign(af,d)}}if("type"in f)if("redirect-internal"===f.type)return this.change(a,f.newUrl,f.newAs,d);else return T({url:f.destination,router:this}),new Promise(()=>{});let g=f.Component;if(g&&g.unstable_scriptLoader&&[].concat(g.unstable_scriptLoader()).forEach(a=>{(0,h.handleClientScriptLoad)(a.props)}),(f.__N_SSG||f.__N_SSP)&&f.props){if(f.props.pageProps&&f.props.pageProps.__N_REDIRECT){d.locale=!1;let b=f.props.pageProps.__N_REDIRECT;if(b.startsWith("/")&&!1!==f.props.pageProps.__N_REDIRECT_BASE_PATH){let c=(0,o.parseRelativeUrl)(b);c.pathname=N(c.pathname,Q);let{url:e,as:f}=M(this,b,b);return this.change(a,e,f,d)}return T({url:b,router:this}),new Promise(()=>{})}if(W.isPreview=!!f.props.__N_PREVIEW,f.props.notFound===P){let a;try{await this.fetchComponent("/404"),a="/404"}catch(b){a="/_error"}if(f=await this.getRouteInfo({route:a,pathname:a,query:af,as:c,resolvedAs:ag,routeProps:{shallow:!1},locale:W.locale,isPreview:W.isPreview,isNotFound:!0}),"type"in f)throw Object.defineProperty(Error("Unexpected middleware effect on /404"),"__NEXT_ERROR_CODE",{value:"E158",enumerable:!1,configurable:!0})}}S&&"/_error"===this.pathname&&(null==(A=self.__NEXT_DATA__.props)||null==(z=A.pageProps)?void 0:z.statusCode)===500&&(null==(B=f.props)?void 0:B.pageProps)&&(f.props.pageProps.statusCode=500);let j=d.shallow&&W.route===(null!=(C=f.route)?C:ah),l=null!=(H=d.scroll)?H:!S&&!j,m=null!=e?e:l?{x:0,y:0}:null,r={...W,route:ah,pathname:ae,query:af,asPath:ab,isFallback:!1};if(S&&am){if(f=await this.getRouteInfo({route:this.pathname,pathname:this.pathname,query:af,as:c,resolvedAs:ag,routeProps:{shallow:!1},locale:W.locale,isPreview:W.isPreview,isQueryUpdating:S&&!this.isFallback}),"type"in f)throw Object.defineProperty(Error("Unexpected middleware effect on "+this.pathname),"__NEXT_ERROR_CODE",{value:"E225",enumerable:!1,configurable:!0});"/_error"===this.pathname&&(null==(L=self.__NEXT_DATA__.props)||null==(I=L.pageProps)?void 0:I.statusCode)===500&&(null==(O=f.props)?void 0:O.pageProps)&&(f.props.pageProps.statusCode=500);try{await this.set(r,f,m)}catch(a){throw(0,i.default)(a)&&a.cancelled&&V.events.emit("routeChangeError",a,ab,aa),a}return!0}if(V.events.emit("beforeHistoryChange",c,aa),this.changeState(a,b,c,d),!(S&&!m&&!X&&!ac&&(0,D.compareRouterStates)(r,this.state))){try{await this.set(r,f,m)}catch(a){if(a.cancelled)f.error=f.error||a;else throw a}if(f.error)throw S||V.events.emit("routeChangeError",f.error,ab,aa),f.error;W.locale&&(document.documentElement.lang=W.locale),S||V.events.emit("routeChangeComplete",c,aa),l&&/#.+$/.test(c)&&this.scrollToHash(c)}return!0}catch(a){if((0,i.default)(a)&&a.cancelled)return!1;throw a}}changeState(a,b,c,d){void 0===d&&(d={}),("pushState"!==a||(0,m.getURL)()!==c)&&(this._shallow=d.shallow,window.history[a]({url:b,as:c,options:d,__N:!0,key:this._key="pushState"!==a?this._key:S()},"",c))}async handleRouteInfoError(a,b,c,d,e,f){if(a.cancelled)throw a;if((0,g.isAssetError)(a)||f)throw V.events.emit("routeChangeError",a,d,e),T({url:d,router:this}),J();console.error(a);try{let d,{page:e,styleSheets:f}=await this.fetchComponent("/_error"),g={props:d,Component:e,styleSheets:f,err:a,error:a};if(!g.props)try{g.props=await this.getInitialProps(e,{err:a,pathname:b,query:c})}catch(a){console.error("Error in error page `getInitialProps`: ",a),g.props={}}return g}catch(a){return this.handleRouteInfoError((0,i.default)(a)?a:Object.defineProperty(Error(a+""),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0}),b,c,d,e,!0)}}async getRouteInfo(a){let{route:b,pathname:c,query:d,as:e,resolvedAs:g,routeProps:h,locale:j,hasMiddleware:l,isPreview:m,unstable_skipClientCache:n,isQueryUpdating:o,isMiddlewareRewrite:p,isNotFound:q}=a,s=b;try{var t,u,v,x;let a=this.components[s];if(h.shallow&&a&&this.route===s)return a;let b=U({route:s,router:this});l&&(a=void 0);let i=!a||"initial"in a?void 0:a,y={dataHref:this.pageLoader.getDataHref({href:(0,r.formatWithValidation)({pathname:c,query:d}),skipInterpolation:!0,asPath:q?"/404":g,locale:j}),hasMiddleware:!0,isServerRender:this.isSsr,parseJSON:!0,inflightCache:o?this.sbc:this.sdc,persistCache:!m,isPrefetch:!1,unstable_skipClientCache:n,isBackground:o},z=o&&!p?null:await O({fetchData:()=>R(y),asPath:q?"/404":g,locale:j,router:this}).catch(a=>{if(o)return null;throw a});if(z&&("/_error"===c||"/404"===c)&&(z.effect=void 0),o&&(z?z.json=self.__NEXT_DATA__.props:z={json:self.__NEXT_DATA__.props}),b(),(null==z||null==(t=z.effect)?void 0:t.type)==="redirect-internal"||(null==z||null==(u=z.effect)?void 0:u.type)==="redirect-external")return z.effect;if((null==z||null==(v=z.effect)?void 0:v.type)==="rewrite"){let b=(0,f.removeTrailingSlash)(z.effect.resolvedHref),e=await this.pageLoader.getPageList();if((!o||e.includes(b))&&(s=b,c=z.effect.resolvedHref,d={...d,...z.effect.parsedAs.query},g=(0,w.removeBasePath)((0,k.normalizeLocalePath)(z.effect.parsedAs.pathname,this.locales).pathname),a=this.components[s],h.shallow&&a&&this.route===s&&!l))return{...a,route:s}}if((0,A.isAPIRoute)(s))return T({url:e,router:this}),new Promise(()=>{});let B=i||await this.fetchComponent(s).then(a=>({Component:a.page,styleSheets:a.styleSheets,__N_SSG:a.mod.__N_SSG,__N_SSP:a.mod.__N_SSP})),C=null==z||null==(x=z.response)?void 0:x.headers.get("x-middleware-skip"),D=B.__N_SSG||B.__N_SSP;C&&(null==z?void 0:z.dataHref)&&delete this.sdc[z.dataHref];let{props:E,cacheKey:F}=await this._getData(async()=>{if(D){if((null==z?void 0:z.json)&&!C)return{cacheKey:z.cacheKey,props:z.json};let a=(null==z?void 0:z.dataHref)?z.dataHref:this.pageLoader.getDataHref({href:(0,r.formatWithValidation)({pathname:c,query:d}),asPath:g,locale:j}),b=await R({dataHref:a,isServerRender:this.isSsr,parseJSON:!0,inflightCache:C?{}:this.sdc,persistCache:!m,isPrefetch:!1,unstable_skipClientCache:n});return{cacheKey:b.cacheKey,props:b.json||{}}}return{headers:{},props:await this.getInitialProps(B.Component,{pathname:c,query:d,asPath:e,locale:j,locales:this.locales,defaultLocale:this.defaultLocale})}});return B.__N_SSP&&y.dataHref&&F&&delete this.sdc[F],this.isPreview||!B.__N_SSG||o||R(Object.assign({},y,{isBackground:!0,persistCache:!1,inflightCache:this.sbc})).catch(()=>{}),E.pageProps=Object.assign({},E.pageProps),B.props=E,B.route=s,B.query=d,B.resolvedAs=g,this.components[s]=B,B}catch(a){return this.handleRouteInfoError((0,i.getProperError)(a),c,d,e,h)}}set(a,b,c){return this.state=a,this.sub(b,this.components["/_app"].Component,c)}beforePopState(a){this._bps=a}onlyAHashChange(a){if(!this.asPath)return!1;let[b,c]=this.asPath.split("#",2),[d,e]=a.split("#",2);return!!e&&b===d&&c===e||b===d&&c!==e}scrollToHash(a){let[,b=""]=a.split("#",2);(0,H.disableSmoothScrollDuringRouteTransition)(()=>{if(""===b||"top"===b)return void window.scrollTo(0,0);let a=decodeURIComponent(b),c=document.getElementById(a);if(c)return void c.scrollIntoView();let d=document.getElementsByName(a)[0];d&&d.scrollIntoView()},{onlyHashChange:this.onlyAHashChange(a)})}urlIsNew(a){return this.asPath!==a}async prefetch(a,b,c){void 0===b&&(b=a),void 0===c&&(c={});let d=(0,o.parseRelativeUrl)(a),e=d.pathname,{pathname:g,query:h}=d,i=g;if(!1===c.locale){d.pathname=g=(0,k.normalizeLocalePath)(g,this.locales).pathname,a=(0,r.formatWithValidation)(d);let e=(0,o.parseRelativeUrl)(b),f=(0,k.normalizeLocalePath)(e.pathname,this.locales);e.pathname=f.pathname,c.locale=f.detectedLocale||this.defaultLocale,b=(0,r.formatWithValidation)(e)}let j=await this.pageLoader.getPageList(),l=b,m=void 0!==c.locale?c.locale||void 0:this.locale,s=await K({asPath:b,locale:m,router:this});d.pathname=N(d.pathname,j),(0,n.isDynamicRoute)(d.pathname)&&(g=d.pathname,d.pathname=g,Object.assign(h,(0,p.getRouteMatcher)((0,q.getRouteRegex)(d.pathname))((0,t.parsePath)(b).pathname)||{}),s||(a=(0,r.formatWithValidation)(d)));let u=await O({fetchData:()=>R({dataHref:this.pageLoader.getDataHref({href:(0,r.formatWithValidation)({pathname:i,query:h}),skipInterpolation:!0,asPath:l,locale:m}),hasMiddleware:!0,isServerRender:!1,parseJSON:!0,inflightCache:this.sdc,persistCache:!this.isPreview,isPrefetch:!0}),asPath:b,locale:m,router:this});if((null==u?void 0:u.effect.type)==="rewrite"&&(d.pathname=u.effect.resolvedHref,g=u.effect.resolvedHref,h={...h,...u.effect.parsedAs.query},l=u.effect.parsedAs.pathname,a=(0,r.formatWithValidation)(d)),(null==u?void 0:u.effect.type)==="redirect-external")return;let v=(0,f.removeTrailingSlash)(g);await this._bfl(b,l,c.locale,!0)&&(this.components[e]={__appRouter:!0}),await Promise.all([this.pageLoader._isSsg(v).then(b=>!!b&&R({dataHref:(null==u?void 0:u.json)?null==u?void 0:u.dataHref:this.pageLoader.getDataHref({href:a,asPath:l,locale:m}),isServerRender:!1,parseJSON:!0,inflightCache:this.sdc,persistCache:!this.isPreview,isPrefetch:!0,unstable_skipClientCache:c.unstable_skipClientCache||c.priority&&!0}).then(()=>!1).catch(()=>!1)),this.pageLoader[c.priority?"loadPage":"prefetch"](v)])}async fetchComponent(a){let b=U({route:a,router:this});try{let c=await this.pageLoader.loadPage(a);return b(),c}catch(a){throw b(),a}}_getData(a){let b=!1,c=()=>{b=!0};return this.clc=c,a().then(a=>{if(c===this.clc&&(this.clc=null),b){let a=Object.defineProperty(Error("Loading initial props cancelled"),"__NEXT_ERROR_CODE",{value:"E405",enumerable:!1,configurable:!0});throw a.cancelled=!0,a}return a})}getInitialProps(a,b){let{Component:c}=this.components["/_app"],d=this._wrapApp(c);return b.AppTree=d,(0,m.loadGetInitialProps)(c,{AppTree:d,Component:a,router:this,ctx:b})}get route(){return this.state.route}get pathname(){return this.state.pathname}get query(){return this.state.query}get asPath(){return this.state.asPath}get locale(){return this.state.locale}get isFallback(){return this.state.isFallback}get isPreview(){return this.state.isPreview}constructor(a,b,c,{initialProps:d,pageLoader:e,App:g,wrapApp:h,Component:i,err:j,subscription:k,isFallback:l,locale:p,locales:q,defaultLocale:t,domainLocales:u,isPreview:v}){this.sdc={},this.sbc={},this.isFirstPopStateEvent=!0,this._key=S(),this.onPopState=a=>{let b,{isFirstPopStateEvent:c}=this;this.isFirstPopStateEvent=!1;let d=a.state;if(!d){let{pathname:a,query:b}=this;this.changeState("replaceState",(0,r.formatWithValidation)({pathname:(0,x.addBasePath)(a),query:b}),(0,m.getURL)());return}if(d.__NA)return void window.location.reload();if(!d.__N||c&&this.locale===d.options.locale&&d.as===this.asPath)return;let{url:e,as:f,options:g,key:h}=d;this._key=h;let{pathname:i}=(0,o.parseRelativeUrl)(e);(!this.isSsr||f!==(0,x.addBasePath)(this.asPath)||i!==(0,x.addBasePath)(this.pathname))&&(!this._bps||this._bps(d))&&this.change("replaceState",e,f,Object.assign({},g,{shallow:g.shallow&&this._shallow,locale:g.locale||this.defaultLocale,_h:0}),b)};let w=(0,f.removeTrailingSlash)(a);this.components={},"/_error"!==a&&(this.components[w]={Component:i,initial:!0,props:d,err:j,__N_SSG:d&&d.__N_SSG,__N_SSP:d&&d.__N_SSP}),this.components["/_app"]={Component:g,styleSheets:[]},this.events=V.events,this.pageLoader=e;let y=(0,n.isDynamicRoute)(a)&&self.__NEXT_DATA__.autoExport;this.basePath="",this.sub=k,this.clc=null,this._wrapApp=h,this.isSsr=!0,this.isLocaleDomain=!1,this.isReady=!!(self.__NEXT_DATA__.gssp||self.__NEXT_DATA__.gip||self.__NEXT_DATA__.isExperimentalCompile||self.__NEXT_DATA__.appGip&&!self.__NEXT_DATA__.gsp||!y&&!self.location.search),this.locales=q,this.defaultLocale=t,this.domainLocales=u,this.isLocaleDomain=!!(0,s.detectDomainLocale)(u,self.location.hostname),this.state={route:w,pathname:a,query:b,asPath:y?a:c,isPreview:!!v,locale:p,isFallback:l},this._initialMatchesMiddlewarePromise=Promise.resolve(!1)}}V.events=(0,l.default)()},79646:a=>{"use strict";a.exports=require("child_process")},79664:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"default",{enumerable:!0,get:function(){return f}}),c(14985);let d=c(60687);c(43210);let e=c(91953);function f(a){function b(b){return(0,d.jsx)(a,{router:(0,e.useRouter)(),...b})}return b.getInitialProps=a.getInitialProps,b.origGetInitialProps=a.origGetInitialProps,b}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},79748:a=>{"use strict";a.exports=require("fs/promises")},79772:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{createRouteLoader:function(){return q},getClientBuildManifest:function(){return o},isAssetError:function(){return k},markAssetError:function(){return j}}),c(14985),c(52668);let d=c(71025),e=c(40932),f=c(90420),g=c(19587);function h(a,b,c){let d,e=b.get(a);if(e)return"future"in e?e.future:Promise.resolve(e);let f=new Promise(a=>{d=a});return b.set(a,{resolve:d,future:f}),c?c().then(a=>(d(a),a)).catch(c=>{throw b.delete(a),c}):f}let i=Symbol("ASSET_LOAD_ERROR");function j(a){return Object.defineProperty(a,i,{})}function k(a){return a&&i in a}let l=function(a){try{return a=document.createElement("link"),!!window.MSInputMethodContext&&!!document.documentMode||a.relList.supports("prefetch")}catch(a){return!1}}(),m=()=>(0,f.getDeploymentIdQueryOrEmptyString)();function n(a,b,c){return new Promise((d,f)=>{let g=!1;a.then(a=>{g=!0,d(a)}).catch(f),(0,e.requestIdleCallback)(()=>setTimeout(()=>{g||f(c)},b))})}function o(){return self.__BUILD_MANIFEST?Promise.resolve(self.__BUILD_MANIFEST):n(new Promise(a=>{let b=self.__BUILD_MANIFEST_CB;self.__BUILD_MANIFEST_CB=()=>{a(self.__BUILD_MANIFEST),b&&b()}}),3800,j(Object.defineProperty(Error("Failed to load client build manifest"),"__NEXT_ERROR_CODE",{value:"E273",enumerable:!1,configurable:!0})))}function p(a,b){return o().then(c=>{if(!(b in c))throw j(Object.defineProperty(Error("Failed to lookup route: "+b),"__NEXT_ERROR_CODE",{value:"E446",enumerable:!1,configurable:!0}));let e=c[b].map(b=>a+"/_next/"+(0,g.encodeURIPath)(b));return{scripts:e.filter(a=>a.endsWith(".js")).map(a=>(0,d.__unsafeCreateTrustedScriptURL)(a)+m()),css:e.filter(a=>a.endsWith(".css")).map(a=>a+m())}})}function q(a){let b=new Map,c=new Map,d=new Map,f=new Map;function g(a){{var b;let d=c.get(a.toString());return d?d:document.querySelector('script[src^="'+a+'"]')?Promise.resolve():(c.set(a.toString(),d=new Promise((c,d)=>{(b=document.createElement("script")).onload=c,b.onerror=()=>d(j(Object.defineProperty(Error("Failed to load script: "+a),"__NEXT_ERROR_CODE",{value:"E74",enumerable:!1,configurable:!0}))),b.crossOrigin=void 0,b.src=a,document.body.appendChild(b)})),d)}}function i(a){let b=d.get(a);return b||d.set(a,b=fetch(a,{credentials:"same-origin"}).then(b=>{if(!b.ok)throw Object.defineProperty(Error("Failed to load stylesheet: "+a),"__NEXT_ERROR_CODE",{value:"E189",enumerable:!1,configurable:!0});return b.text().then(b=>({href:a,content:b}))}).catch(a=>{throw j(a)})),b}return{whenEntrypoint:a=>h(a,b),onEntrypoint(a,c){(c?Promise.resolve().then(()=>c()).then(a=>({component:a&&a.default||a,exports:a}),a=>({error:a})):Promise.resolve(void 0)).then(c=>{let d=b.get(a);d&&"resolve"in d?c&&(b.set(a,c),d.resolve(c)):(c?b.set(a,c):b.delete(a),f.delete(a))})},loadRoute(c,d){return h(c,f,()=>{let e;return n(p(a,c).then(a=>{let{scripts:d,css:e}=a;return Promise.all([b.has(c)?[]:Promise.all(d.map(g)),Promise.all(e.map(i))])}).then(a=>this.whenEntrypoint(c).then(b=>({entrypoint:b,styles:a[1]}))),3800,j(Object.defineProperty(Error("Route did not complete loading: "+c),"__NEXT_ERROR_CODE",{value:"E12",enumerable:!1,configurable:!0}))).then(a=>{let{entrypoint:b,styles:c}=a,d=Object.assign({styles:c},b);return"error"in b?b:d}).catch(a=>{if(d)throw a;return{error:a}}).finally(()=>null==e?void 0:e())})},prefetch(b){let c;return(c=navigator.connection)&&(c.saveData||/2g/.test(c.effectiveType))?Promise.resolve():p(a,b).then(a=>Promise.all(l?a.scripts.map(a=>{var b,c,d;return b=a.toString(),c="script",new Promise((a,e)=>{let f='\n      link[rel="prefetch"][href^="'+b+'"],\n      link[rel="preload"][href^="'+b+'"],\n      script[src^="'+b+'"]';if(document.querySelector(f))return a();d=document.createElement("link"),c&&(d.as=c),d.rel="prefetch",d.crossOrigin=void 0,d.onload=a,d.onerror=()=>e(j(Object.defineProperty(Error("Failed to prefetch: "+b),"__NEXT_ERROR_CODE",{value:"E268",enumerable:!1,configurable:!0}))),d.href=b,document.head.appendChild(d)})}):[])).then(()=>{(0,e.requestIdleCallback)(()=>this.loadRoute(b,!0).catch(()=>{}))}).catch(()=>{})}}}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},80920:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(61369).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/onebird/github/mcp-chat-client/src/components/SettingsPage.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/onebird/github/mcp-chat-client/src/components/SettingsPage.tsx","default")},84171:(a,b)=>{"use strict";function c(a){return Object.prototype.toString.call(a)}function d(a){if("[object Object]"!==c(a))return!1;let b=Object.getPrototypeOf(a);return null===b||b.hasOwnProperty("isPrototypeOf")}Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{getObjectClassLabel:function(){return c},isPlainObject:function(){return d}})},84530:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"interpolateAs",{enumerable:!0,get:function(){return f}});let d=c(12352),e=c(33645);function f(a,b,c){let f="",g=(0,e.getRouteRegex)(a),h=g.groups,i=(b!==a?(0,d.getRouteMatcher)(g)(b):"")||c;f=a;let j=Object.keys(h);return j.every(a=>{let b=i[a]||"",{repeat:c,optional:d}=h[a],e="["+(c?"...":"")+a+"]";return d&&(e=(b?"":"/")+"["+e+"]"),c&&!Array.isArray(b)&&(b=[b]),(d||a in i)&&(f=f.replace(e,c?b.map(a=>encodeURIComponent(a)).join("/"):encodeURIComponent(b))||"/")})||(f=""),{params:j,result:f}}},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},87331:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"formatNextPathnameInfo",{enumerable:!0,get:function(){return h}});let d=c(84949),e=c(98834),f=c(19307),g=c(98636);function h(a){let b=(0,g.addLocale)(a.pathname,a.locale,a.buildId?void 0:a.defaultLocale,a.ignorePrefix);return(a.buildId||!a.trailingSlash)&&(b=(0,d.removeTrailingSlash)(b)),a.buildId&&(b=(0,f.addPathSuffix)((0,e.addPathPrefix)(b,"/_next/data/"+a.buildId),"/"===a.pathname?"index.json":".json")),b=(0,e.addPathPrefix)(b,a.basePath),!a.buildId&&a.trailingSlash?b.endsWith("/")?b:(0,f.addPathSuffix)(b,"/"):(0,d.removeTrailingSlash)(b)}},89513:(a,b,c)=>{"use strict";a.exports=c(94041).vendored.contexts.HeadManagerContext},90420:(a,b)=>{"use strict";function c(){return""}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"getDeploymentIdQueryOrEmptyString",{enumerable:!0,get:function(){return c}})},91953:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{Router:function(){return f.default},createRouter:function(){return p},default:function(){return n},makePublicRouterInstance:function(){return q},useRouter:function(){return o},withRouter:function(){return i.default}});let d=c(14985),e=d._(c(43210)),f=d._(c(79171)),g=c(69148),h=d._(c(98557)),i=d._(c(79664)),j={router:null,readyCallbacks:[],ready(a){if(this.router)return a()}},k=["pathname","route","query","asPath","components","isFallback","basePath","locale","locales","defaultLocale","isReady","isPreview","isLocaleDomain","domainLocales"],l=["push","replace","reload","back","prefetch","beforePopState"];function m(){if(!j.router)throw Object.defineProperty(Error('No router instance found.\nYou should only use "next/router" on the client side of your app.\n'),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return j.router}Object.defineProperty(j,"events",{get:()=>f.default.events}),k.forEach(a=>{Object.defineProperty(j,a,{get:()=>m()[a]})}),l.forEach(a=>{j[a]=function(){for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return m()[a](...c)}}),["routeChangeStart","beforeHistoryChange","routeChangeComplete","routeChangeError","hashChangeStart","hashChangeComplete"].forEach(a=>{j.ready(()=>{f.default.events.on(a,function(){for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];let e="on"+a.charAt(0).toUpperCase()+a.substring(1);if(j[e])try{j[e](...c)}catch(a){console.error("Error when running the Router event: "+e),console.error((0,h.default)(a)?a.message+"\n"+a.stack:a+"")}})})});let n=j;function o(){let a=e.default.useContext(g.RouterContext);if(!a)throw Object.defineProperty(Error("NextRouter was not mounted. https://nextjs.org/docs/messages/next-router-not-mounted"),"__NEXT_ERROR_CODE",{value:"E509",enumerable:!1,configurable:!0});return a}function p(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return j.router=new f.default(...b),j.readyCallbacks.forEach(a=>a()),j.readyCallbacks=[],j.router}function q(a){let b={};for(let c of k){if("object"==typeof a[c]){b[c]=Object.assign(Array.isArray(a[c])?[]:{},a[c]);continue}b[c]=a[c]}return b.events=f.default.events,l.forEach(c=>{b[c]=function(){for(var b=arguments.length,d=Array(b),e=0;e<b;e++)d[e]=arguments[e];return a[c](...d)}}),b}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},98245:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>j,metadata:()=>i});var d=c(37413),e=c(98896),f=c(57028),g=c(29883),h=c(80920);let i={title:"Settings",description:"Configure LLM providers, MCP servers, and application preferences"};async function j(){let[a,b]=await Promise.all([(0,f.Z)(),(0,g.od)()]);return(0,d.jsx)(e.LX,{children:(0,d.jsx)("main",{className:"flex-1 container mx-auto px-4 py-8",children:(0,d.jsx)(h.default,{language:b,serverSettings:a})})})}},98557:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{default:function(){return e},getProperError:function(){return f}});let d=c(84171);function e(a){return"object"==typeof a&&null!==a&&"name"in a&&"message"in a}function f(a){return e(a)?a:Object.defineProperty(Error((0,d.isPlainObject)(a)?function(a){let b=new WeakSet;return JSON.stringify(a,(a,c)=>{if("object"==typeof c&&null!==c){if(b.has(c))return"[Circular]";b.add(c)}return c})}(a):a+""),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}},98636:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"addLocale",{enumerable:!0,get:function(){return f}});let d=c(98834),e=c(2255);function f(a,b,c,f){if(!b||b===c)return a;let g=a.toLowerCase();return!f&&((0,e.pathHasPrefix)(g,"/api")||(0,e.pathHasPrefix)(g,"/"+b.toLowerCase()))?a:(0,d.addPathPrefix)(a,"/"+b)}},99090:(a,b)=>{"use strict";function c(a,b,c){if(a)for(let f of(c&&(c=c.toLowerCase()),a)){var d,e;if(b===(null==(d=f.domain)?void 0:d.split(":",1)[0].toLowerCase())||c===f.defaultLocale.toLowerCase()||(null==(e=f.locales)?void 0:e.some(a=>a.toLowerCase()===c)))return f}}Object.defineProperty(b,"C",{enumerable:!0,get:function(){return c}})}};var b=require("../../webpack-runtime.js");b.C(a);var c=b.X(0,[985,567,736,167],()=>b(b.s=39216));module.exports=c})();